(function(){dust.register("tl/apps/profile/v2/embed/treasury_view_v2",N);
var ai={"media_cell_2row":M,"media_cell_3row":F,"thumbnail_view":an,"reorder_item":am,"hidden_view":aj};
function N(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("ne",aD,{"else":Z,"block":V},{"key":ap,"value":"true","type":"boolean"})
}function M(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<div tabindex="0" class="media-cell media-wrapper-2row treasury-open-item evt-dispatch').helper("eq",aD,{"block":L},{"key":K,"value":"-1"}).write('" data-event-id="treasury-open-item" data-item-id="').reference(aD.get(["id"],false),aD,"h").write('">').block(aD.getBlock("thumbnail_view"),aD,{},null).write("</div>").section(aD.get(["items"],false),aD,{"block":J},null)
}function L(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" media-add-frame cell disabled")
}function K(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["id"],false),aD,"h")
}function J(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get(["meta"],false),aD,{"block":I},null)
}function I(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":H},{"key":G,"value":"-1"})
}function H(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("reorder_item"),aD,{},null)
}function G(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["id"],false),aD,"h")
}function F(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<div tabindex="0" class="media-cell media-wrapper-3row treasury-open-item evt-dispatch').helper("eq",aD,{"block":E},{"key":ax,"value":"-1"}).write('" data-event-id="treasury-open-item" data-item-id="').reference(aD.get(["id"],false),aD,"h").write('">').block(aD.getBlock("thumbnail_view"),aD,{},null).write("</div>").section(aD.get(["items"],false),aD,{"block":av},null)
}function E(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" media-add-frame cell disabled")
}function ax(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["id"],false),aD,"h")
}function av(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get(["meta"],false),aD,{"block":at},null)
}function at(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":aq},{"key":ao,"value":"-1"})
}function aq(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("reorder_item"),aD,{},null)
}function ao(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["id"],false),aD,"h")
}function an(aE,aD){aD=aD.shiftBlocks(ai);
return aE.partial("tl/apps/profile/treasury/profile_thumbnail_view",aD,null)
}function am(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get(["formData"],false),aD,{"block":al},{"group":ak,"itemId":"TRSY"})
}function al(aE,aD){aD=aD.shiftBlocks(ai);
return aE.partial("tl/apps/profile/treasury/reorder_item",aD,null)
}function ak(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("treasury-").reference(aD.get(["profileElement"],false),aD,"h")
}function aj(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<a href="javascript:void(0)" class="hidden-view-more view-media-link evt-dispatch" data-event-id="treasury-view-more" role="button">').reference(aD.get(["i18n_view_more"],false),aD,"h").write("</a>").helper("eq",aD,{"else":ah,"block":ag},{"key":aa,"value":"B"})
}function ah(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<a href="javascript:void(0)" class="hidden-view-less view-media-link evt-dispatch stealth" data-event-id="treasury-view-less" role="button">').reference(aD.get(["i18n_view_less"],false),aD,"h").write("</a>")
}function ag(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get(["items"],false),aD,{"block":af},null)
}function af(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get(["meta"],false),aD,{"block":ae},null)
}function ae(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":ad},{"key":ab,"value":"-1"})
}function ad(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<a href="#tooltip-').reference(aD.get(["profileElement"],false),aD,"h").write('" class="hidden-view-collapse evt-dispatch transparent" data-event-id="treasury-view-less">').reference(aD.get(["i18n_collapse"],false),aD,"h").write("</a>").helper("jsControl",aD,{"block":ac},{"name":"LI.BalloonCallout"}).write('<div id="tooltip-').reference(aD.get(["profileElement"],false),aD,"h").write('" class="callout-container"><div class="callout-content">').reference(aD.get(["i18n_collapse"],false),aD,"h").write("</div></div>")
}function ac(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("{width: 'auto',id:'tooltip-").reference(aD.get(["profileElement"],false),aD,"h",["h","j","s"]).write("',orientation: 'bottom',type: 'tooltip-callout'}")
}function ab(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["id"],false),aD,"h")
}function aa(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["lix_treasury_pagination"],false),aD,"h")
}function Z(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"else":Y,"block":X},{"key":W,"value":"2row"}).block(aD.getBlock("reorder_item"),aD,{},null)
}function Y(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("media_cell_3row"),aD,{},null)
}function X(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("media_cell_2row"),aD,{},null)
}function W(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["whichRow"],false),aD,"h")
}function V(aE,aD){aD=aD.shiftBlocks(ai);
return aE.exists(aD.get(["items"],false),aD,{"block":U},null)
}function U(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get(["items"],false),aD,{"block":T},null).write('<div class="treasury-container').helper("ne",aD,{"block":R},{"key":Q,"value":"true"}).helper("eq",aD,{"else":P,"block":O},{"key":aD.get(["lix_facelift"],false),"value":"B"}).write('"').section(aD.get(["items"],false),aD,{"block":D},null).write(">").section(aD.get(["items"],false),aD,{"block":z},null).write("</div>").helper("eq",aD,{"else":b,"block":au},{"key":ar,"value":"true","type":"string"})
}function T(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":S},{"key":aD.get(["$len"],false),"value":"1","type":"number"})
}function S(aE,aD){aD=aD.shiftBlocks(ai);
return aE.partial("tl/apps/profile/treasury/treasury_add_link",aD,null)
}function R(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" no-server-fetch")
}function Q(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["hasMore"],false),aD,"h")
}function P(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" original")
}function O(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" facelift")
}function D(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get(["meta"],false),aD,{"block":C},null)
}function C(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":B},{"key":A,"value":"-1"})
}function B(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('data-section-id="').reference(aD.get(["profileElement"],false),aD,"h").write('"')
}function A(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["id"],false),aD,"h")
}function z(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("math",aD,{"block":y},{"key":aD.get(["$idx"],false),"method":"mod","operand":"5"}).helper("math",aD,{"block":f},{"key":aD.get(["$len"],false),"method":"subtract","operand":aD.get(["$idx"],false)})
}function y(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("lte",aD,{"else":x,"block":o},{"value":"1","type":"number"})
}function x(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("math",aD,{"block":w},{"key":aD.get(["$idx"],false),"method":"mod","operand":"5"})
}function w(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":v},{"value":"2","type":"number"}).section(aD.get(["meta"],false),aD,{"block":q},null).helper("eq",aD,{"block":p},{"value":"4","type":"number"})
}function v(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<div class="media-wrapper').helper("gte",aD,{"block":u},{"key":aD.get(["$idx"],false),"value":"5","type":"number"}).section(aD.get(["meta"],false),aD,{"block":t},null).write('">')
}function u(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" stealth")
}function t(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":s},{"key":r,"value":"-1"})
}function s(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" media-add-frame")
}function r(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["id"],false),aD,"h")
}function q(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("media_cell_3row"),aD,{},null)
}function p(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("</div>")
}function o(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("math",aD,{"block":n},{"key":aD.get(["$idx"],false),"method":"mod","operand":"5"})
}function n(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":m},{"value":"0","type":"number"}).section(aD.get(["meta"],false),aD,{"block":h},null).helper("eq",aD,{"block":g},{"value":"1","type":"number"})
}function m(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<div class="media-wrapper').helper("gte",aD,{"block":l},{"key":aD.get(["$idx"],false),"value":"5","type":"number"}).section(aD.get(["meta"],false),aD,{"block":k},null).write('">')
}function l(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" stealth")
}function k(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":j},{"key":i,"value":"-1"})
}function j(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" media-add-frame")
}function i(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["id"],false),aD,"h")
}function h(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("media_cell_2row"),aD,{},null)
}function g(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("</div>")
}function f(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":e},{"value":"1","type":"number"})
}function e(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("math",aD,{"block":d},{"key":aD.get(["$idx"],false),"method":"mod","operand":"5"})
}function d(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{},{"value":"1","type":"number"}).helper("eq",aD,{},{"value":"4","type":"number"}).helper("default",aD,{"block":c},null)
}function c(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("</div>")
}function b(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get(["items"],false),aD,{"block":a},null)
}function a(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":aC},{"key":aD.get(["$idx"],false),"value":"0","type":"number"})
}function aC(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"else":aB,"block":az},{"key":aw,"value":"true","type":"string"})
}function aB(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("gte",aD,{"block":aA},{"key":aD.get(["$len"],false),"value":"6","type":"number"})
}function aA(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("hidden_view"),aD,{},null)
}function az(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("gte",aD,{"block":ay},{"key":aD.get(["$len"],false),"value":"7","type":"number"})
}function ay(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("hidden_view"),aD,{},null)
}function aw(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["selfView"],false),aD,"h")
}function au(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("hidden_view"),aD,{},null)
}function ar(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["hasMore"],false),aD,"h")
}function ap(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get(["addNew"],false),aD,"h")
}return N
})();
(function(){dust.register("treasury_view_v2",dust.cache["tl/apps/profile/v2/embed/treasury_view_v2"])
})();(function(){dust.register("tl/apps/profile/v2/embed/treasury_dialog_v2",m);
function m(q,p){return q.section(p.get(["treasury"],false),p,{"block":k},null)
}function k(q,p){return q.exists(p.get(["pictureID"],false),p,{"else":i,"block":g},null).write('<div class="treasury-dialog-wrapper">').exists(p.get(["items"],false),p,{"block":f},null).write("</div>")
}function i(q,p){return q
}function g(q,p){return q
}function f(q,p){return q.write('<div></div><div class="carousel-container"><div class="carousel-wrapper"><ul class="carousel">').section(p.get(["items"],false),p,{"block":e},null).write('</ul></div><a href="javascript:void(0);" class="btn-prev disabled evt-dispatch" data-event-id="treasury-carousel-prev" role="button">‹</a><a href="javascript:void(0);" class="btn-next evt-dispatch" data-event-id="treasury-carousel-next" role="button">›</a><p class="carousel-position"></p><div class="hr"></div></div>')
}function e(q,p){return q.section(p.get(["comments"],false),p,{"block":d},null).section(p.get(["meta"],false),p,{"block":b},null).section(p.get(["likes"],false),p,{"block":a},null).section(p.get(["meta"],false),p,{"block":n},null)
}function d(q,p){return q.section(p.get(["recentComments"],false),p,{"block":c},null)
}function c(q,p){return q
}function b(q,p){return q
}function a(q,p){return q.section(p.get(["recentActors"],false),p,{"block":o},null)
}function o(q,p){return q
}function n(q,p){return q.write('<li class="evt-dispatch" data-event-id="treasury-carousel-selected" data-item-id="').reference(p.get(["id"],false),p,"h").write('"><a href="javascript:void(0);" role="button">').section(p.get(["images"],false),p,{"block":l},null).write('</a><div class="meta"><div class="background"></div><p><span title="').reference(p.get(["title"],false),p,"h").write('">').reference(p.get(["title"],false),p,"h").write("</span></p></div></li>")
}function l(q,p){return q.helper("eq",p,{"block":j},{"key":h,"value":"0"})
}function j(q,p){return q.write('<img src="').reference(p.get(["url"],false),p,"h").write('" title="').reference(p.get(["title"],false),p,"h").write('" alt="').reference(p.get(["altText"],false),p,"h").write('"/>')
}function h(q,p){return q.reference(p.get(["$idx"],false),p,"h")
}return m
})();
(function(){dust.register("treasury_dialog_v2",dust.cache["tl/apps/profile/v2/embed/treasury_dialog_v2"])
})();(function(){dust.register("tl/apps/profile/treasury/profile_thumbnail_view",p);
function p(B,A){return B.helper("eq",A,{"else":n,"block":v},{"key":A.get(["lix_facelift"],false),"value":"B"})
}function n(B,A){return B.write('<div class="outer"><span class="media-image-wrapper">').section(A.get(["images"],false),A,{"block":m},null).write('<span class="centering-helper"></span></span></div><div class="media-desc"><div class="text-box"><p>').reference(A.get(["title"],false),A,"h").write('</p></div><a class="btn-media-edit evt-dispatch').helper("eq",A,{"block":d},{"key":c,"value":"-1"}).write('" href="javascript:void(0);" title="').reference(A.get(["i18n_Edit"],false),A,"h").write('" data-event-id="media-edit-item" data-id="').reference(A.get(["id"],false),A,"h").write('" role="button">').reference(A.get(["i18n_Edit"],false),A,"h").write("</a></div>")
}function m(B,A){return B.helper("eq",A,{"block":k},{"key":e,"value":"0","type":"number"})
}function k(B,A){return B.write('<img class="media-image ').exists(A.get(["deferImg"],false),A,{"block":i},null).write('" ').exists(A.get(["deferImg"],false),A,{"else":g,"block":f},null).write(' alt="').reference(A.get(["title"],false),A,"h").write('" data-width="').reference(A.get(["width"],false),A,"h").write('" data-height="').reference(A.get(["height"],false),A,"h").write('"/>')
}function i(B,A){return B.write("lazy-load")
}function g(B,A){return B.write('src="').reference(A.get(["url"],false),A,"h").write('"')
}function f(B,A){return B.write('src="').reference(A.get(["spacer"],false),A,"h").write('" data-li-src="').reference(A.get(["url"],false),A,"h").write('"')
}function e(B,A){return B.reference(A.get(["$idx"],false),A,"h")
}function d(B,A){return B.write(" media-add-new")
}function c(B,A){return B.reference(A.get(["id"],false),A,"h")
}function v(B,A){return B.write('<div class="media-data">').section(A.get(["images"],false),A,{"else":u,"block":t},null).write('<div class="media-desc"><p class="description">').reference(A.get(["title"],false),A,"h").write('</p></div></div><a class="media-edit btn-media-edit evt-dispatch').helper("eq",A,{"block":y},{"key":x,"value":"-1"}).write('" href="javascript:void(0);" title="').reference(A.get(["i18n_Edit"],false),A,"h").write('" data-event-id="media-edit-item" data-id="').reference(A.get(["id"],false),A,"h").write('" role="button"><span>').reference(A.get(["i18n_Edit"],false),A,"h").write('</span><div class="loader"></div></a>').exists(A.get(["slideShareUrl"],false),A,{"block":w},null)
}function u(B,A){return B.write('<div class="media-placeholder"></div>')
}function t(B,A){return B.helper("eq",A,{"block":s},{"key":z,"value":"0","type":"number"})
}function s(B,A){return B.write('<div class="media-image ').exists(A.get(["deferImg"],false),A,{"block":r},null).helper("lt",A,{"block":q},{"key":A.get(["width"],false),"value":"280"}).helper("lt",A,{"block":o},{"key":A.get(["height"],false),"value":"136"}).write('"').exists(A.get(["deferImg"],false),A,{"else":l,"block":j},null).write('><img class="thumbnail ').exists(A.get(["deferImg"],false),A,{"block":h},null).write('" ').exists(A.get(["deferImg"],false),A,{"else":b,"block":a},null).write(' alt="').reference(A.get(["title"],false),A,"h").write('" data-width="').reference(A.get(["width"],false),A,"h").write('" data-height="').reference(A.get(["height"],false),A,"h").write('"/></div>')
}function r(B,A){return B.write("lazy-load")
}function q(B,A){return B.write(" img-has-small-width")
}function o(B,A){return B.write(" img-has-small-height")
}function l(B,A){return B.write("style=\"background-image: url('").reference(A.get(["url"],false),A,"h").write("');-ms-filter: &quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(src='").reference(A.get(["url"],false),A,"h").write("', sizingMethod='scale')&quot;;\"")
}function j(B,A){return B.write('data-li-src="').reference(A.get(["url"],false),A,"h").write('"')
}function h(B,A){return B.write("lazy-load")
}function b(B,A){return B.write('src="').reference(A.get(["url"],false),A,"h").write('"')
}function a(B,A){return B.write('src="').reference(A.get(["spacer"],false),A,"h").write('" data-li-src="').reference(A.get(["url"],false),A,"h").write('"')
}function z(B,A){return B.reference(A.get(["$idx"],false),A,"h")
}function y(B,A){return B.write(" media-add-new")
}function x(B,A){return B.reference(A.get(["id"],false),A,"h")
}function w(B,A){return B.write('<a class="media-slideshare evt-dispatch" data-event-id="media-open-slideshare" href="').reference(A.get(["slideShareUrl"],false),A,"h").write('" title="').reference(A.get(["i18n_view_on_slideshare"],false),A,"h").write('" target="_blank"><span>').reference(A.get(["i18n_view_on_slideshare"],false),A,"h").write("</span></a>")
}return p
})();
(function(){dust.register("profile_thumbnail_view",dust.cache["tl/apps/profile/treasury/profile_thumbnail_view"])
})();LI.define("JSONPRequest");
LI.JSONPRequest=function(){this._init.apply(this,arguments)
};
LI.JSONPRequest.prototype={_requests:0,_init:function(a,c){this.url=a;
c=(YAHOO.lang.isFunction(c))?{on:{success:c}}:c||{};
var b=c.on||{};
if(!b.success){b.success=this._defaultCallback(a,c)
}this._config=YAHOO.lang.merge({context:this,args:[],format:this._format,allowCache:false},c,{on:b})
},_defaultCallback:function(){},send:function(){var a=this,d=Array.prototype.slice.call(arguments),c=a._config,e=a._proxy||a._uniqid(),b;
if(c.allowCache){a._proxy=e;
a._requests++
}d.unshift(a.url,"LI.JSONP."+e);
b=c.format.apply(a,d);
if(!c.on.success){return a
}function f(g){return(YAHOO.lang.isFunction(g))?function(h){if(!c.allowCache||!--a._requests){delete LI.JSONP[e]
}g.apply(c.context,[h].concat(c.args));
clearTimeout(LI.JSONPReqTimers[e])
}:null
}LI.JSONP[e]=f(c.on.success);
YAHOO.util.Get.script(b,{onFailure:f(c.on.failure),onTimeout:f(c.on.timeout),timeout:c.timeout});
if(c.timeout>0){LI.JSONPReqTimers[e]=setTimeout(f(c.on.timeout),c.timeout)
}return a
},_format:function(a,b){return a.replace(/\{callback\}/,b)
},_uniqid:function(){return("LI"+this._S4()+this._S4()+"_"+this._S4()+"_"+this._S4()+"_"+this._S4()+"_"+this._S4()+this._S4()+this._S4())
},_S4:function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)
}};
if(!LI.JSONP){LI.JSONP={}
}if(!LI.JSONPReqTimers){LI.JSONPReqTimers={}
};(function(c,e){var d="ontouchstart" in document.documentElement?"touchend":"click",b=LI.Events.fire,a=e.trim;
e(document).on(d,".evt-dispatch",function(h){var g=e(this),f=a(g.data("event-id"));
h.preventDefault();
h.stopPropagation();
if(f&&!g.hasClass("disabled")){b(f,g)
}})
}(this,jQuery));(function(a,b){var d,c;
b(".media-cell").on("mouseenter",function(){if(!d){d=new Date().getTime()
}});
b(".media-cell").on("click",function(){if(!c){c=new Date().getTime();
WebTracking.trackUserAction("treasury_ux_hover",{time:c-d},true)
}});
b(document).unload(function(){if(d&&!c){WebTracking.trackUserAction("treasury_ux_hover",{time:0},true)
}else{if(!c){WebTracking.trackUserAction("treasury_ux_hover",{time:-5},true)
}}});
setTimeout(function(){if(d&&!c){WebTracking.trackUserAction("treasury_ux_hover",{time:-10},true)
}else{if(!c){WebTracking.trackUserAction("treasury_ux_hover",{time:-15},true)
}}},1800000)
}(this,jQuery));(function(e){var d=e.requires("jquery"),c=e.requires("underscore"),a=e.requires("BaseControl"),b;
b=a.extend(function(h){var f=("placeholder" in document.createElement("input")),g={placeholderClass:"placeholder",preserveAttributes:["class","id","name","tabindex","title","placeholder"],clearOnFormSubmit:false};
return{init:function(n,l){var p=d(n),o=p.find(':input:not(:submit):not([type="hidden"])'),j=o.length,k;
this.$input=p;
if(j){for(var m=0;
m<j;
m++){k=new b(o[m],l)
}return false
}else{if(!p.is(":input:not(:submit)")||p.attr("placeholder")===undefined){return false
}}if(!f||(l&&l.forcePlaceholderSupported)){h.init.apply(this,arguments)
}},beforeDecoration:function(){this.$input=this._$el;
this.$form=this.$input.closest("form");
c.union(g.preserveAttributes,this._config.preserveAttributes);
this._config=c.defaults(this._config,g);
this.inputType=this.$input.attr("type");
this.placeholderText=this.$input.attr("placeholder");
if(this.$input.val()===""){this._addPlaceholderClass()
}if(this.inputType==="password"){this._generateField("text",false,false)
}if(this.$form&&this._config.clearOnFormSubmit){this.attachFormListener()
}},afterDecoration:function(){if(this.inputType!=="password"&&this.$input.val()===""){this.$input.val(this.placeholderText)
}},attachEventListeners:function(){if(this.inputType==="password"){this.$input.on("focus blur",this._onPassword)
}else{this.$input.on("focus blur paste",this._onText)
}},attachFormListener:function(){var i;
this.$form.off("submit.placeholder-toggle").on("submit.placeholder-toggle",c.bind(function(){i=this.$form.find("."+this._config.placeholderClass);
if(i.length){i.val("")
}},this))
},_onText:function(i){if(i.type==="focus"&&this.$input.val()===this.placeholderText){this._removePlaceholderClass();
this.$input.val("")
}if(i.type==="blur"&&this.$input.val()===""){this._addPlaceholderClass();
this.$input.val(this.placeholderText)
}},_onPassword:function(i){if(i.type==="focus"&&this.$input.val()===this.placeholderText&&this.$input.attr("type")==="text"){this._generateField("password",true,true);
this._removePlaceholderClass()
}if(i.type==="blur"&&this.$input.val()===""){this._generateField("text",false,true);
this._addPlaceholderClass()
}},_generateField:function(o,k,n){var q=d('<input type="'+o+'" />'),l=this._config.preserveAttributes,j=l.length,p,m;
for(m=0;
m<j;
m++){p=l[m];
q.attr(p,this.$input.attr(p))
}this.$input.replaceWith(q);
this.$input=q;
if(o==="text"){q.val(this.placeholderText)
}if(n){this.attachEventListeners()
}if(k){setTimeout(function(){q.focus()
},0)
}},_addPlaceholderClass:function(){this.$input.addClass(this._config.placeholderClass)
},_removePlaceholderClass:function(){this.$input.removeClass(this._config.placeholderClass)
}}
});
e.exports("Placeholder",b)
}(window.LIModules));(function(Q,H){var l="ontouchstart" in document.documentElement?"touchend":"click",aa=LI.Events,j=aa.bind,w=aa.fire,t=LI.htmlEncode,Z=Q.ShowMore,S=Q.XSS,B=function(ag){try{WebTracking.trackUserAction(ag)
}catch(ah){}},a,e="show-media-error",v="_treasuryId",q="_detail",G=13,A=419,s=202,V,O,o,F,g,X,y,ac,U,c,L,r,af,ae,m=0,I="disabled",T="hidden",C="selected",u="loading",d="show",z=H("body"),h=LI.browser,D,ab,W,N,R,n,M,P,f,K,b,x,k,p,ad,Y,J,E;
function i(){a=LI.TREASURY_CONF;
af=a.i18n;
r=a.url;
W=a.tracks;
ab=a.lix;
O=af.treasury_viewer_title;
o=af.treasury_error_rendering;
V=af.treasury_dialog_position;
F=af.error_posting_comment;
a.sessionAvatar=a.sessionAvatar?a.sessionAvatar:null;
if(ab.facelift){A=374;
s=187
}H(".treasury-container").siblings(".callout-container").remove();
R=document.body.style;
N=R.WebkitTransition!==undefined||R.MozTransition!==undefined||R.OTransition!==undefined||R.transition!==undefined;
ae=!(h.ie&&(h.ie6||h.ie7||h.ie8));
P=function(ai){var aj;
if(ab.newProfileEdit){return
}if(!c&&!J){J=true;
if(!D){D=new LI.RichViewer("",{data:c,carousel:{track:r.post_view_event},flag:r.flag,lix:a.lix})
}else{D.clearData()
}aj=r.get_all.replace("_offset",0).replace("_count",1000000).replace("_isFullView",1).replace("_section","");
aj=a.isNmp?aj.replace("_memberId",a.memberId):aj;
H.getJSON(aj,function(am){var ak,al;
if(am.status!=="ok"){k(af.error_fetching_full_view_data)
}else{c=am.content;
c.treasury_conf=a;
E=c.defaultAvatar;
if(c&&c.treasury.items){al=c.treasury.items;
ak=al.length;
while(ak--){f(al[ak])
}}c.sessionFullName=a.sessionFullName;
c.sessionAvatar=a.sessionAvatar;
c.sessionProfile=a.sessionProfile;
D.updateData(c);
if(typeof ai==="function"){ai()
}}J=false
})
}};
z.on("mouseenter",".treasury-open-item",P);
f=function(at){var ak=at.likes,ap=ak&&ak.recentActors,ao=at.comments,aq="member:"+a.sessionId,ar=ao&&ao.recentComments,am=a.selfView,au=/\{:?0\}/,aj=/\{:?1\}/,al=/\{:?2\}/,an,ai;
if(ar){ai=ao.totalComments;
ao.totalComments=ai>0?ai:0;
an=ar.length;
while(an--){if(am||ar[an].commenterId===aq){ar[an].deletable=true
}}K(ar);
ao.showMoreComments=(ar.length<ai)
}else{at.comments={}
}if(ak&&ap&&ap.length<3){ak.totalLikes=Math.min(ap.length,ak.totalLikes)
}if(ak&&ak.totalLikes>0){switch(ak.totalLikes){case 1:if(ak.likedByCurrentUser){ak.i18n_like_link=at.i18n_like_link_1;
ak.i18n_unlike_link=""
}else{ak.i18n_like_link=ak.i18n_like_link_3.replace(au,ap[0].profile_link);
ak.i18n_unlike_link=ak.i18n_like_link_2.replace(au,ap[0].profile_link)
}break;
case 2:if(ak.likedByCurrentUser){ak.i18n_like_link=ak.i18n_like_link_3.replace(au,ap[0].profile_link);
ak.i18n_unlike_link=ak.i18n_like_link_2.replace(au,ap[0].profile_link)
}else{ak.i18n_like_link=ak.i18n_like_link_5.replace(au,ap[0].profile_link).replace(aj,ap[1].profile_link);
ak.i18n_unlike_link=ak.i18n_like_link_4.replace(au,ap[0].profile_link).replace(aj,ap[1].profile_link)
}break;
case 3:if(ak.likedByCurrentUser){ak.i18n_like_link=ak.i18n_like_link_5.replace(au,ap[0].profile_link).replace(aj,ap[1].profile_link);
ak.i18n_unlike_link=ak.i18n_like_link_4.replace(au,ap[0].profile_link).replace(aj,ap[1].profile_link)
}else{ak.i18n_like_link=ak.i18n_like_link_7.replace(au,ap[0].profile_link).replace(aj,2);
ak.i18n_unlike_link=ak.i18n_like_link_6.replace(au,ap[0].profile_link).replace(aj,ap[1].profile_link).replace(al,ap[2].profile_link)
}break;
default:if(ak.likedByCurrentUser){ak.i18n_like_link=ak.i18n_like_link_7.replace(au,ap[0].profile_link).replace(aj,ak.totalLikes-2);
ak.i18n_unlike_link=ak.i18n_like_link_8.replace(au,ap[0].profile_link).replace(aj,ap[1].profile_link).replace(al,ak.totalLikes-3)
}else{ak.i18n_like_link=ak.i18n_like_link_7.replace(au,ap[0].profile_link).replace(aj,ak.totalLikes-1);
ak.i18n_unlike_link=ak.i18n_like_link_8.replace(au,ap[0].profile_link).replace(aj,ap[1].profile_link).replace(al,ak.totalLikes-2)
}break
}}else{at.likes={totalLikes:0,i18n_like_link:at.i18n_like_link_1,i18n_unlike_link:""}
}};
K=function(ai){if(ai){ai.sort(function(ak,aj){return ak.createdDate>aj.createdDate?1:(ak.createdDate<aj.createdDate?-1:0)
})
}};
k=function(ai){w(e,ai)
};
p=function(aj){var ai;
if(aj.length>1&&aj.charAt(0)==="B"){ai=parseInt(aj.substr(1),10)
}return ai
};
b=function(aj){var ai,ak;
ai=H(".social-integration .comment-counter .counter");
ak=(parseInt(ai.text().replace(/\(|\)/,""),10)||0)+(aj?1:-1);
ai.text(ak?"("+ak+")":"")
};
x=function(ai){H.ajax({type:"POST",url:r.post_view_event.replace(v,ai)})
};
Y=function(ak){var aj=c&&c.treasury&&c.treasury.items,ai=aj&&aj.length;
while(ai--){if(aj[ai].meta.id===ak){return{item:aj[ai],index:ai}
}}return null
};
if(a.selfView){j("media-item-changed",function(ai){var aj;
if(c){M=true;
c=null
}P()
});
j("media-item-removed",function(ai){var aj;
if(c){aj=Y(ai.id);
if(aj){c.treasury.items.splice(aj.index,1);
c.treasury.num--;
if(D){D.clearData();
D.updateData(c)
}}}})
}j("treasury-open-item",function(ai){if(a.isNmp){c=undefined;
P(function(){D.open(ai)
})
}});
j("treasury-flag-item",function(ak){var ai=H("#dialog-wrapper.treasury-dialog"),al=ai.find(".carousel .evt-dispatch.selected").data("item-id"),aj=ak.hasClass("inappropriate")?"inappropriate":"copyright";
H.ajax(r.flag.replace(v,al).replace(q,aj),{dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(){var am;
if(!H.support.opacity){am=ai.find("iframe");
if(am.length){am.addClass("stealth");
ai.find(".media-mask").addClass("opaque")
}}ai.find(".media-mask, .flagged-content, .undo-action").removeClass("stealth");
ai.find(".do-action").addClass("stealth");
if(aj==="copyright"){LI.popup(ak.attr("href"),{})
}},error:function(){w(e,af.error_removing_data)
}})
});
j("treasury-undo-flag-item",function(){var ai=H("#dialog-wrapper.treasury-dialog"),aj;
if(!H.support.opacity){aj=ai.find("iframe");
if(aj.length){aj.removeClass("stealth");
ai.find(".media-mask").removeClass("opaque")
}}ai.find(".media-mask, .flagged-content, .undo-action").addClass("stealth");
ai.find(".do-action").removeClass("stealth")
});
j("see-all-likers",function(al){var ak=al.closest("ul").data("all-liker-url"),ai=al.parent(),am=ai.next(),aj="loaded";
if(!am.hasClass(aj)){H.ajax(ak,{type:"GET",dataType:"html",success:function(an){an=H(an).appendTo(am);
am.addClass(aj).show();
ai.hide();
am.find(".show-less").addClass("evt-dispatch").attr("data-event-id","show-less-likes")
},error:function(){}})
}else{am.show();
ai.hide()
}});
j("show-less-likes",function(aj){var ak=aj.parent(),ai=ak.prev();
ak.hide();
ai.show()
});
function ag(aj,ak){var al=aj.find(".media-wrapper").not(".media-add-frame"),ai;
if(!ak){al=al.not(".stealth")
}ai=al.length-2;
return(A+s*ai)
}j("treasury-view-more",function(ai){var am=ai.siblings(".treasury-container"),aw=ag(am,true),au=ai.siblings(".hidden-view-collapse"),ap=ab.pagination,av=am.attr("data-section-id")||"summary",al=am.find(".media-cell").not(".media-add-frame").length,ar,aj,ak=p(ab.pageSize)||100,at=p(ab.prefetchThreshold)||2,ao="no-server-fetch";
function an(az,ax){var aA,ay;
if(N){aA=am.css("height");
am.css("height",aA);
ay=parseInt(aA,10)+(s*az);
setTimeout(function(){am.addClass("animate").css("height",ay+"px");
if(ax){ai.addClass("animate transparent active")
}if(au.hasClass("transparent")){au.removeClass("animate transparent").addClass("active")
}},0)
}}function aq(az,ay,aA){var ax=r.get_all.replace("_offset",az).replace("_count",ak).replace("_isFullView",0).replace("_section",encodeURIComponent(ay));
ax=a.isNmp?ax.replace("_memberId",a.memberId):ax;
am[0].isFetching=true;
am[0].showNextDeferred=false;
H.getJSON(ax,function(aC){var aB;
if(aC.status!=="ok"){k(af.error_fetching_full_view_data);
am[0].isFetching=false;
am[0].showNextDeferred=false
}else{aB=aC.content.treasury;
dust.render("treasury_view_v2",aB,function(aE,aD){if(aE){k(o)
}else{aA({rows:H(aD).children(".media-wrapper").not(".media-add-frame"),hasMore:aB.hasMore})
}am[0].isFetching=false;
am[0].showNextDeferred=false
})
}})
}if(ap){ar=am.find(".media-wrapper.stealth").not(".media-add-frame");
aj=ar.slice(0,2);
if(aj.length){an(aj.length,ar.length<=2&&am.hasClass(ao));
aj.removeClass("stealth");
if(ar.length<(2+2*at)&&!am.hasClass(ao)&&!am[0].isFetching){aq(al,av,function(ax){ax.rows.addClass("stealth");
ax.rows.insertAfter(am.children(".media-wrapper").not(".media-add-frame").last());
if(!ax.hasMore){am.addClass(ao)
}if(am[0].showNextDeferred){ar=am.find(".media-wrapper.stealth").not(".media-add-frame");
aj=ar.slice(0,2);
an(aj.length,ar.length<=2&&am.hasClass(ao));
aj.removeClass("stealth");
am[0].showNextDeferred=false
}})
}}else{if(!am[0].isFetching){aq(al,av,function(ax){an(ax.rows.length,!ax.hasMore);
ax.rows.insertAfter(am.children(".media-wrapper").not(".media-add-frame").last());
if(!ax.hasMore){am.addClass(ao)
}})
}else{am[0].showNextDeferred=true
}}}else{ai.addClass("stealth");
ai.siblings(".hidden-view-less").removeClass("stealth");
am.find(".media-wrapper").removeClass("stealth");
if(N&&!am.hasClass("adding")){am.css("height",A+"px");
setTimeout(function(){am.addClass("animate").css("height",aw+"px")
},50)
}}});
j("treasury-view-less",function(ak){var al=ak.siblings(".treasury-container"),aj=ak.siblings(".hidden-view-more"),ai=ab.pagination;
if(ai){ak.addClass("animate transparent active");
aj.addClass("active").removeClass("animate transparent")
}else{ak.addClass("stealth");
aj.removeClass("stealth");
if(N){al.css("height",ag(al)+"px");
setTimeout(function(){al.addClass("animate");
al.css("height",A+"px")
},50)
}else{al.find(".media-wrapper").slice(2).addClass("stealth")
}}});
j("treasury-social-like",function(an){var aj="like",ai="unlike",al,am;
an.addClass(u);
function ak(){var ao;
ao=an.find(".counter");
am=parseInt(ao.text().replace(/\(|\)/,""),10)||0;
if(an.hasClass(aj)){an.removeClass(aj).addClass(ai);
am--;
al=an.attr("data-url-unlike")
}else{an.removeClass(ai).addClass(aj);
am++;
al=an.attr("data-url-like")
}ao.text((am>0)?"("+am+")":"")
}ak();
H.ajax(al,{type:"POST",dataType:"JSON",success:function(){var ao;
an.removeClass(u);
ao=an.closest(".social-integration").find(".comments > ul .likes,.comments > ul .unlikes");
ao.toggle(T);
c.likes=c.likes||{};
c.likes.totalLikes=am||0;
c.likes.likedByCurrentUser=!c.likes.likedByCurrentUser
},error:function(){an.removeClass(u);
ak()
},headers:{"X-Requested-With":"XMLHttpRequest","X-IsAJAXForm":1}})
});
j("treasury-social-comment",function(ai){ai.closest(".social-integration").find("textarea").focus()
});
j("delete-treasury-comment",function(al){var aj=al.attr("data-url"),ai=H(".social-integration .comment-counter .counter"),ak,am=al.closest("li");
if(aj.length){H.ajax(aj,{type:"POST",dataType:"JSON",headers:{"X-IsAJAXForm":1}}).done(function(){al.remove();
am.slideUp(function(){H(this).remove();
c.comments=c.comments||{};
c.comments.totalComments=(c.comments.totalComments||1)-1;
c.comments.recentComments=c.comments.recentComments||[];
_.each(c.comments.recentComments,function(ao,an){if(ao.url__remove_comment===aj){c.comments.recentComments.splice(an,1)
}});
ak=c.comments.totalComments;
ai.text(ak?"("+ak+")":"")
})
}).fail(function(){am.find(".delete-error").removeClass(T);
w(e,af.error_deleting_comment)
})
}else{}});
j("show-more-treasury-comments",function(ak){var ai=ak.data("url"),al=(ab.socialCommentShowMoreCount+"").replace("show_",""),am=parseInt(al,10),an=c.comments,aj,ao,ap,aq;
am=am>0&&am<1000?am:25;
ap=an.totalComments;
ao=ao>0&&ao<am?ao:am;
aj=ap-an.recentComments.length-ao;
aq=false;
ai=ai.replace("_start",aj).replace("_count",ao).replace("_total",ap).replace("_reverseChron",aq);
ak.addClass(u);
H.ajax(ai,{success:function(aO){var aI,aJ,aG,aA,aC,at,aL,aM,aB,av,aK,aD,ay,ar,aN,aE,ax,au,aw,az,aF=aO&&aO.content&&aO.content.commentsWithActor,aH=aF&&aF.comments;
ak.removeClass(u);
aD=ak.parent().parent();
if(!aO||aO.status!=="ok"||!aO.content||!aF||!aH||!aH.elements||!aH.elements.length){aD.hide();
return k(af.error_showing_more_comments)
}aI=aH.elements;
aJ=aI.length;
aA=H(".social-integration .comments ul");
aC=aA.children(".hidden.comment").last();
ay=c.comments.recentComments;
while(aJ--){aK=aI[aJ];
aG=aK.message;
aL=aK.threadId;
aM=aK.commentId||(aK.urnMap&&aK.urnMap.id);
if(H('a[data-url*="commentId='+aM+'"]').length){continue
}at=aC.clone();
ar=t(aK.commenter.url);
aw=aK.commenter;
aN=aw&&aw.image?t(aw.image.url):E;
aE=t(aK.commenter.title);
az=aw.properties;
ax=aw.link__delete_comment;
au=aw.creation_timestamp;
if(ab.commentDeletion==="enabled"){aB=at.find(".delete");
av=aB.data("url").replace("_threadUrn",aL).replace("_commentId",aM);
aB.attr("data-url",av)
}at.find(".comment-avatar").attr("href",ar);
at.find(".comment-avatar img").attr("alt",aE).attr("src",aN);
at.find("a.commenter").text(aE);
at.find(".timestamp").text(au);
at.find("q").text(aG);
at.removeClass(T);
aD.after(at);
ay["push"]({deletable:true,commenter:{url:aK.url,image:aK.commenter.image,title:aK.commenter.title,fmt__creation_timestamp:au,url__remove_comment:ax},message:aG})
}if(ay.length>=c.comments.totalComments||!aI.length){aD.hide();
c.comments.showMoreComments=false
}},error:function(){ak.removeClass(u);
k(af.error_showing_more_comments)
}})
});
z.on("otransitionend transitionend webkitTransitionEnd",".treasury-container",function(){var ai=H(this);
ai.removeClass("animate");
if(ai.css("height")===(A+"px")){ai.find(".media-wrapper").slice(2).addClass("stealth")
}ai.css("height","")
});
H("button.dialog-close").on(function(){H("html").css("overflow","auto");
H("html").removeAttr("scrolling")
});
function ah(){var ak=Q.location.href,aj=ak.match(/mediaId=(\d+)/),al,ai;
if(aj&&aj[1]){al=aj[1];
ai=H(".media-cell[data-item-id="+al+"]");
if(ai.length){if(!ai.is(":visible")){ai.parent().parent().parent().find(".hidden-view-more a").trigger(l)
}ai.trigger(l)
}}}ah()
}j(e,function(ag){if(H.fn.ProfileEdit){H.fn.ProfileEdit.showGlobalAlert(ag,"failure")
}else{LI.injectAlert(ag,"failure")
}});
j("treasury-share-link",function(ah){var ag=H(".share-link-input");
ah.closest(".actions").toggleClass("show-share-link-input");
ag.toggleClass(d);
setTimeout(function(){ag.select()
},500)
});
H.fn.ready(i)
}(this,jQuery));(function(){dust.register("tl/apps/profile/v2/embed/treasury_edit",N);
function N(a4,a3){return a4.write('<div class="treasury-edit-form-container"><form class="standard-form stacked treasury-edit" name="').reference(a3.get(["name"],false),a3,"h").write('" method="').reference(a3.get(["method"],false),a3,"h").write('" action="').reference(a3.get(["action"],false),a3,"h").write('"><div class="triangle"></div><div class="error-msg">').helper("select",a3,{"block":M},{"key":a3.get(["errorType"],false)}).write('</div><ul><li><div class="fieldgroup"><span class="error"></span></div></li> ').helper("eq",a3,{"else":F,"block":av},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).notexists(a3.get(["add_new"],false),a3,{"block":D},null).write("</ul>").helper("eq",a3,{"block":d},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).write('<p class="actions media-edit-section">').helper("eq",a3,{"block":c},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).write('<button class="save-btn btn-primary evt-dispatch" type="button" value="').section(a3.get(["i18n"],false),a3,{"block":b},null).write('" data-event-id="media-save" data-id="').section(a3.get(["html"],false),a3,{"block":a},null).write('">').section(a3.get(["i18n"],false),a3,{"block":a1},null).write("</button>").helper("eq",a3,{"block":aY},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).write('<button class="continue-btn btn-primary" type="button">').section(a3.get(["i18n"],false),a3,{"block":aU},null).write('</button><button class="btn-secondary btn-cancel evt-dispatch" type="button" data-event-id="media-cancel">').section(a3.get(["i18n"],false),a3,{"block":aS},null).write('</button><button class="btn-media-remove evt-dispatch" type="button" data-event-id="media-remove" data-id="').section(a3.get(["html"],false),a3,{"block":aQ},null).write('"  ').exists(a3.get(["publishToSlideShareLix"],false),a3,{"block":aI},null).write(">").section(a3.get(["i18n"],false),a3,{"block":aH},null).write("</button>").helper("eq",a3,{"block":aG},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).write("</p>").section(a3.get(["html"],false),a3,{"block":aF},null).write('<div class="screen"></div></form><div class="progress-indicator"></div></div>')
}function M(a4,a3){return a4.helper("eq",a3,{"block":L},{"value":"type"}).helper("eq",a3,{"block":J},{"value":"size"}).helper("default",a3,{"block":H},null)
}function L(a4,a3){return a4.write('<p class="type-error">').section(a3.get(["i18n"],false),a3,{"block":K},null).write("</p>")
}function K(a4,a3){return a4.reference(a3.get(["error_upload_unsupported_file_type"],false),a3,"h",["mk","s"])
}function J(a4,a3){return a4.write('<p class="size-error">').section(a3.get(["i18n"],false),a3,{"block":I},null).write("</p>")
}function I(a4,a3){return a4.reference(a3.get(["error_upload_size_exceeded"],false),a3,"h",["mk","s"])
}function H(a4,a3){return a4.write("<p>").section(a3.get(["i18n"],false),a3,{"block":G},null).write("</p>")
}function G(a4,a3){return a4.reference(a3.get(["error_general_error"],false),a3,"h",["mk","s"])
}function F(a4,a3){return a4.exists(a3.get(["url"],false),a3,{"block":E},null)
}function E(a4,a3){return a4.write('<li><label for="media-url" class="media-input">').exists(a3.get(["add_new"],false),a3,{"block":aX},null).notexists(a3.get(["add_new"],false),a3,{"block":aK},null).write('</label><div class="fieldgroup"><input onpaste="javascript:LI.Events.fire(\'media-url-paste\', this);" type="text" name="title" value="').reference(a3.get(["url"],false),a3,"h").write('" id="media-url" class="inpt media-url').exists(a3.get(["add_new"],false),a3,{"block":aD},null).write('" ').notexists(a3.get(["add_new"],false),a3,{"block":aB},null).write(' /></div><span class="media-tip">').section(a3.get(["i18n"],false),a3,{"block":az},null).write('</span><a href="').reference(a3.get(["providers"],false),a3,"h").write('" class="providers" data-event-id="media-providers">').section(a3.get(["i18n"],false),a3,{"block":ax},null).write("</a></li>")
}function aX(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":aV},null).write('<span class="error">').exists(a3.get(["treasurygeneralerror"],false),a3,{"block":aT},null).exists(a3.get(["treasuryurlnotsupport"],false),a3,{"block":aP},null).exists(a3.get(["treasuryurlinvalid"],false),a3,{"block":aM},null).write("</span>")
}function aV(a4,a3){return a4.reference(a3.get(["edit_add_a_link"],false),a3,"h")
}function aT(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":aR},null)
}function aR(a4,a3){return a4.reference(a3.get(["error_general_error"],false),a3,"h")
}function aP(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":aN},null)
}function aN(a4,a3){return a4.reference(a3.get(["error_url_not_supported"],false),a3,"h")
}function aM(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":aL},null)
}function aL(a4,a3){return a4.reference(a3.get(["error_invalid_url"],false),a3,"h")
}function aK(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":aJ},null)
}function aJ(a4,a3){return a4.reference(a3.get(["edit_link"],false),a3,"h")
}function aD(a4,a3){return a4.write(" media-add-new")
}function aB(a4,a3){return a4.write('disabled="disabled"')
}function az(a4,a3){return a4.reference(a3.get(["edit_add_a_link_info"],false),a3,"h")
}function ax(a4,a3){return a4.reference(a3.get(["edit_add_a_link_providers"],false),a3,"h")
}function av(a4,a3){return a4.exists(a3.get(["add_url"],false),a3,{"block":at},null)
}function at(a4,a3){return a4.write('<li><label for="media-url" class="media-input">').exists(a3.get(["add_new"],false),a3,{"block":ar},null).notexists(a3.get(["add_new"],false),a3,{"block":U},null).write('</label><div class="fieldgroup"><input onpaste="javascript:LI.Events.fire(\'media-url-paste\', this);" type="text" name="title" value="').reference(a3.get(["url"],false),a3,"h").write('" id="media-url" class="inpt media-url').exists(a3.get(["add_new"],false),a3,{"block":R},null).write('" ').notexists(a3.get(["add_new"],false),a3,{"block":Q},null).write(' /></div><span class="media-tip">').section(a3.get(["i18n"],false),a3,{"block":P},null).write('</span><a href="').reference(a3.get(["providers"],false),a3,"h").write('" class="providers" data-event-id="media-providers">').section(a3.get(["i18n"],false),a3,{"block":O},null).write("</a></li>")
}function ar(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":aq},null).write('<span class="error">').exists(a3.get(["treasurygeneralerror"],false),a3,{"block":ap},null).exists(a3.get(["treasuryurlnotsupport"],false),a3,{"block":ac},null).exists(a3.get(["treasuryurlinvalid"],false),a3,{"block":Y},null).write("</span>")
}function aq(a4,a3){return a4.reference(a3.get(["edit_add_a_link"],false),a3,"h")
}function ap(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":ao},null)
}function ao(a4,a3){return a4.reference(a3.get(["error_general_error"],false),a3,"h")
}function ac(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":aa},null)
}function aa(a4,a3){return a4.reference(a3.get(["error_url_not_supported"],false),a3,"h")
}function Y(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":W},null)
}function W(a4,a3){return a4.reference(a3.get(["error_invalid_url"],false),a3,"h")
}function U(a4,a3){return a4.section(a3.get(["i18n"],false),a3,{"block":S},null)
}function S(a4,a3){return a4.reference(a3.get(["edit_link"],false),a3,"h")
}function R(a4,a3){return a4.write(" media-add-new")
}function Q(a4,a3){return a4.write('disabled="disabled"')
}function P(a4,a3){return a4.reference(a3.get(["edit_add_a_link_info"],false),a3,"h")
}function O(a4,a3){return a4.reference(a3.get(["edit_add_a_link_providers"],false),a3,"h")
}function D(a4,a3){return a4.write('<li class="photo-section"><fieldset><label for="media-photo">').section(a3.get(["i18n"],false),a3,{"block":C},null).write('</label><ul><li><label class="checkbox"><input type="checkbox" name="photo" checked="true" id="media-photo">').section(a3.get(["i18n"],false),a3,{"block":B},null).write('</label></li></ul></fieldset></li><li><label for="').section(a3.get(["html"],false),a3,{"block":A},null).write('" class="media-input">').section(a3.get(["i18n"],false),a3,{"block":y},null).write('<abbr title="').section(a3.get(["i18n"],false),a3,{"block":x},null).write('" class="required">*</abbr><span class="error"></span></label><div class="fieldgroup">').section(a3.get(["html"],false),a3,{"block":w},null).write('</div></li><li><label for="').section(a3.get(["html"],false),a3,{"block":u},null).write('">').section(a3.get(["i18n"],false),a3,{"block":s},null).write('</label><div class="fieldgroup">').section(a3.get(["html"],false),a3,{"block":r},null).write('<span class="error"></span></div></li>').exists(a3.get(["publishToSlideShareLix"],false),a3,{"block":p},null).exists(a3.get(["enableMovingTreasuryObject"],false),a3,{"block":j},null)
}function C(a4,a3){return a4.reference(a3.get(["edit_photo"],false),a3,"h")
}function B(a4,a3){return a4.reference(a3.get(["edit_include"],false),a3,"h",["mk","s"])
}function A(a4,a3){return a4.section(a3.get(["customTitle"],false),a3,{"block":z},null)
}function z(a4,a3){return a4.reference(a3.get(["id"],false),a3,"h")
}function y(a4,a3){return a4.reference(a3.get(["edit_title"],false),a3,"h")
}function x(a4,a3){return a4.reference(a3.get(["edit_required_field"],false),a3,"h")
}function w(a4,a3){return a4.section(a3.get(["customTitle"],false),a3,{"block":v},null)
}function v(a4,a3){return a4.write('<input class="media-title" type="text" autocomplete="on" name="').reference(a3.get(["name"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" id="').reference(a3.get(["id"],false),a3,"h").write('" data-original-text="').reference(a3.get(["value"],false),a3,"h").write('" />')
}function u(a4,a3){return a4.section(a3.get(["customDescription"],false),a3,{"block":t},null)
}function t(a4,a3){return a4.reference(a3.get(["id"],false),a3,"h")
}function s(a4,a3){return a4.reference(a3.get(["edit_description"],false),a3,"h")
}function r(a4,a3){return a4.section(a3.get(["customDescription"],false),a3,{"block":q},null)
}function q(a4,a3){return a4.write('<textarea class="media-description" name="').reference(a3.get(["name"],false),a3,"h").write('" id="').reference(a3.get(["id"],false),a3,"h").write('" rows="6" cols="60" class="txtarea">').reference(a3.get(["value"],false),a3,"h").write("</textarea>")
}function p(a4,a3){return a4.section(a3.get(["html"],false),a3,{"block":o},null)
}function o(a4,a3){return a4.section(a3.get(["publishToSlideShare"],false),a3,{"block":n},null)
}function n(a4,a3){return a4.write('<li><input class="publish-to-slideshare" type="checkbox" id="').reference(a3.get(["id"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" ').helper("eq",a3,{"block":m},{"key":a3.get(["checkedByDefault"],false),"value":"true","type":"boolean"}).write('/><label for="').reference(a3.get(["id"],false),a3,"h").write('">').section(a3.get(["i18n"],false),a3,{"block":l},null).write('</label><a href="http://www.slideshare.net/about/" target="_blank" class="slideshare-learn-more">').section(a3.get(["i18n"],false),a3,{"block":k},null).write('</a><span class="error"></span></li>')
}function m(a4,a3){return a4.write("checked")
}function l(a4,a3){return a4.reference(a3.get(["publish_to_slideshare_label"],false),a3,"h")
}function k(a4,a3){return a4.reference(a3.get(["slideshare_learn_more_label"],false),a3,"h")
}function j(a4,a3){return a4.section(a3.get(["html"],false),a3,{"block":i},null)
}function i(a4,a3){return a4.section(a3.get(["newSection"],false),a3,{"block":h},null)
}function h(a4,a3){return a4.write("<li><label>").section(a3.get(["i18n"],false),a3,{"block":g},null).write('</label><div class="fieldgroup section-select"><select type="').reference(a3.get(["type"],false),a3,"h").write('" id="').reference(a3.get(["id"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('">').section(a3.get(["options"],false),a3,{"block":f},null).write("</select></div></li>")
}function g(a4,a3){return a4.reference(a3.get(["edit_move_prompt"],false),a3,"h")
}function f(a4,a3){return a4.write('<option value="').reference(a3.get(["value"],false),a3,"h").write('" ').exists(a3.get(["selected"],false),a3,{"block":e},null).write(' value="').reference(a3.get(["value"],false),a3,"h").write('">').reference(a3.get(["label"],false),a3,"h").write("</option>")
}function e(a4,a3){return a4.write('selected class="original"')
}function d(a4,a3){return a4.write('<div class="upload-again"></div>')
}function c(a4,a3){return a4.write('<span class="lixUploadFile">')
}function b(a4,a3){return a4.reference(a3.get(["edit_btn_save"],false),a3,"h")
}function a(a4,a3){return a4.section(a3.get(["treasuryID"],false),a3,{"block":a2},null)
}function a2(a4,a3){return a4.reference(a3.get(["value"],false),a3,"h")
}function a1(a4,a3){return a4.exists(a3.get(["fetched"],false),a3,{"else":a0,"block":aZ},null)
}function a0(a4,a3){return a4.reference(a3.get(["edit_btn_save"],false),a3,"h")
}function aZ(a4,a3){return a4.reference(a3.get(["edit_btn_add_to_profile"],false),a3,"h")
}function aY(a4,a3){return a4.write('<button class="upload-file-btn btn-primary" type="button">').section(a3.get(["i18n"],false),a3,{"block":aW},null).write("</button>")
}function aW(a4,a3){return a4.reference(a3.get(["upload_file"],false),a3,"h")
}function aU(a4,a3){return a4.reference(a3.get(["edit_btn_continue"],false),a3,"h")
}function aS(a4,a3){return a4.reference(a3.get(["edit_btn_cancel"],false),a3,"h")
}function aQ(a4,a3){return a4.section(a3.get(["treasuryID"],false),a3,{"block":aO},null)
}function aO(a4,a3){return a4.reference(a3.get(["value"],false),a3,"h")
}function aI(a4,a3){return a4.write('data-ssSlideshowId="').reference(a3.get(["ssSlideshowId"],false),a3,"h").write('"')
}function aH(a4,a3){return a4.reference(a3.get(["edit_btn_remove"],false),a3,"h")
}function aG(a4,a3){return a4.write("</span>")
}function aF(a4,a3){return a4.section(a3.get(["timestamp"],false),a3,{"block":aE},null).section(a3.get(["goback"],false),a3,{"block":aC},null).section(a3.get(["useJsonResponse"],false),a3,{"block":aA},null).section(a3.get(["locale"],false),a3,{"block":ay},null).section(a3.get(["sourceAlias"],false),a3,{"block":aw},null).section(a3.get(["nudgeID"],false),a3,{"block":au},null).section(a3.get(["csrfToken"],false),a3,{"block":ah},null).section(a3.get(["treasuryID"],false),a3,{"block":ag},null).section(a3.get(["treasury"],false),a3,{"block":af},null).section(a3.get(["code"],false),a3,{"block":ae},null).section(a3.get(["currentSection"],false),a3,{"block":ad},null).section(a3.get(["slideshow"],false),a3,{"block":ab},null).section(a3.get(["customTitle"],false),a3,{"block":Z},null).section(a3.get(["customDescription"],false),a3,{"block":X},null).section(a3.get(["isImage"],false),a3,{"block":V},null).exists(a3.get(["publishToSlideShareLix"],false),a3,{"block":T},null).write('<input id="memberId" value="').reference(a3.get(["memberId"],false),a3,"h").write('" name="id" type="hidden"/><input id="sectionId" value="').reference(a3.get(["sectionId"],false),a3,"h").write('" name="section" type="hidden"/><input type="submit" class="hidden" name="submit" value="').section(a3.get(["i18n"],false),a3,{"block":ai},null).write('"/>')
}function aE(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function aC(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function aA(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function ay(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function aw(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function au(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function ah(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function ag(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function af(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function ae(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function ad(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden">')
}function ab(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden"/>')
}function Z(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden"/>')
}function X(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden"/>')
}function V(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden"/>')
}function T(a4,a3){return a4.section(a3.get(["publishToSlideShareHidden"],false),a3,{"block":an},null).section(a3.get(["ssSlideshowId"],false),a3,{"block":am},null).section(a3.get(["ssSlideshowUrl"],false),a3,{"block":al},null).section(a3.get(["ssMoveToEmail"],false),a3,{"block":ak},null).section(a3.get(["newSlideShareAccountCreated"],false),a3,{"block":aj},null)
}function an(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden"/>')
}function am(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden"/>')
}function al(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden"/>')
}function ak(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden"/>')
}function aj(a4,a3){return a4.write('<input id="').reference(a3.get(["id"],false),a3,"h").write('" value="').reference(a3.get(["value"],false),a3,"h").write('" name="').reference(a3.get(["name"],false),a3,"h").write('" type="hidden"/>')
}function ai(a4,a3){return a4.reference(a3.get(["edit_btn_save"],false),a3,"h")
}return N
})();
(function(){dust.register("treasury_edit",dust.cache["tl/apps/profile/v2/embed/treasury_edit"])
})();(function(){dust.register("tl/apps/profile/treasury/reorder_item",e);
function e(h,g){return h.helper("jsControl",g,{"block":d},{"name":"Sortable.Section"})
}function d(h,g){return h.write("{existingDragHandlePath: ").exists(g.get(["dragHandle"],false),g,{"else":c,"block":b},null).write(",serverValue: '").reference(g.get(["itemId"],false),g,"h",["h","j","s"]).write("',group: '").reference(g.get(["group"],false),g,"h",["h","j","s"]).write("',sortableObject: LI.TreasurySortable,additionalProxyClass: ").exists(g.get(["additionalProxyClass"],false),g,{"else":a,"block":f},null).write("}")
}function c(h,g){return h.write("'.edit-order'")
}function b(h,g){return h.write("'").reference(g.get(["dragHandle"],false),g,"h",["h","j","s"]).write("'")
}function a(h,g){return h.write("'background-section-drag-proxy'")
}function f(h,g){return h.reference(g.get(["additionalProxyClass"],false),g,"h")
}return e
})();
(function(){dust.register("reorder_item",dust.cache["tl/apps/profile/treasury/reorder_item"])
})();(function(){dust.register("tl/apps/profile/treasury/treasury_add_link",p);
var w={"bigPromo":o};
function p(E,D){D=D.shiftBlocks(w);
return E.exists(D.get(["showBigPromo"],false),D,{"block":l},null).exists(D.get(["showSmallPromo"],false),D,{"block":C},null)
}function o(E,D){D=D.shiftBlocks(w);
return E.write('<div class="treasury-promo">').helper("eq",D,{"block":m},{"key":f,"value":"control"}).write('<div class="media-wrapper"><div class="media-item media-wrapper-3row media-cell"><div class="outer"><span class="media-image-wrapper"><img src="').reference(D.get(["spacer"],false),D,"h").write('" data-li-src="').reference(D.get(["bg_promo_1"],false),D,"h").write('" class="media-image lazy-load" alt=""/><span class="centering-helper"></span></span></div><div class="media-desc"><div class="text-box"><p>').reference(D.get(["promo_text_1"],false),D,"h").write('</p></div></div></div><div class="media-item media-wrapper-3row media-cell"><div class="outer"><span class="media-image-wrapper"><img src="').reference(D.get(["spacer"],false),D,"h").write('" data-li-src="').reference(D.get(["bg_promo_2"],false),D,"h").write('" class="media-image lazy-load" alt=""/><span class="centering-helper"></span></span></div><div class="media-desc"><div class="text-box"><p>').reference(D.get(["promo_text_2"],false),D,"h").write('</p></div></div></div><div class="media-item media-wrapper-3row media-cell"><div class="outer"><span class="media-image-wrapper"><img src="').reference(D.get(["spacer"],false),D,"h").write('" data-li-src="').reference(D.get(["bg_promo_3"],false),D,"h").write('" class="media-image lazy-load" alt=""/><span class="centering-helper"></span></span></div><div class="media-desc"><div class="text-box"><p>').reference(D.get(["promo_text_3"],false),D,"h").write('</p></div></div></div></div><div class="').helper("eq",D,{"else":e,"block":d},{"key":c,"value":"B"}).write('">').helper("eq",D,{"block":v},{"key":u,"value":"B"}).write('<form action="" method="POST" name="treasury-add" class="standard-form"><span class="error"></span>').helper("ne",D,{"block":t},{"key":s,"value":"B"}).write('<label for="url" class="a11y-hidden-label">').reference(D.get(["i18n_add_link_to_content"],false),D,"h",["et","s"]).write('</label><input type="text" onpaste="javascript:LI.Events.fire(\'media-url-paste\', this);" autocomplete="off" placeholder="http://" name="url" class="media-url media-url-promo" />').helper("eq",D,{"else":r,"block":q},{"key":n,"value":"B"}).write('</div><a class="x-close evt-dispatch" data-event-id="media-close-promo" href="#">&nbsp;</a><div class="progress-indicator"></div></div>')
}function m(E,D){D=D.shiftBlocks(w);
return E.helper("eq",D,{"else":k,"block":i},{"key":g,"value":"B"})
}function k(E,D){D=D.shiftBlocks(w);
return E.write('<p class="prompt">').reference(D.get(["i18n_media_get_discovered"],false),D,"h",["mk","s"]).write('<img src="').reference(D.get(["spacer"],false),D,"h").write('" data-li-src="').reference(D.get(["bg_arw_drawn"],false),D,"h").write('" class="lazy-load" alt=""/>')
}function i(E,D){D=D.shiftBlocks(w);
return E.write('<p class="prompt">').reference(D.get(["i18n_media_get_discovered_upload"],false),D,"h",["mk","s"]).write('<img src="').reference(D.get(["spacer"],false),D,"h").write('" data-li-src="').reference(D.get(["bg_arw_drawn"],false),D,"h").write('" class="lazy-load" alt=""/>')
}function g(E,D){D=D.shiftBlocks(w);
return E.reference(D.get(["lix_treasury_upload"],false),D,"h")
}function f(E,D){D=D.shiftBlocks(w);
return E.reference(D.get(["lix_treasury_viewer"],false),D,"h")
}function e(E,D){D=D.shiftBlocks(w);
return E.write("treasury-form-container")
}function d(E,D){D=D.shiftBlocks(w);
return E.write("treasury-form-container-upload")
}function c(E,D){D=D.shiftBlocks(w);
return E.reference(D.get(["lix_treasury_upload"],false),D,"h")
}function v(E,D){D=D.shiftBlocks(w);
return E.write('<div class="upload-form-container">')
}function u(E,D){D=D.shiftBlocks(w);
return E.reference(D.get(["lix_treasury_upload"],false),D,"h")
}function t(E,D){D=D.shiftBlocks(w);
return E.write('<p class="prompt">').reference(D.get(["i18n_media_form_prompt"],false),D,"h",["et","s"]).write("</p>")
}function s(E,D){D=D.shiftBlocks(w);
return E.reference(D.get(["lix_treasury_upload"],false),D,"h")
}function r(E,D){D=D.shiftBlocks(w);
return E.write('<a href="').reference(D.get(["providers"],false),D,"h").write('" class="providers" title="').reference(D.get(["i18n_media_form_providers_title"],false),D,"h").write('" data-event-id="media-providers">').reference(D.get(["i18n_media_form_providers"],false),D,"h",["et","s"]).write("</a></form>")
}function q(E,D){D=D.shiftBlocks(w);
return E.write('</form></div><span class="or-separator">').reference(D.get(["i18n_media_Add_Link_Or_Upload_File_Separator"],false),D,"h",["et","s"]).write('</span><button class="treasury-file-upload-btn" type="button"><label for="slideshare-file-input" class="treasury-file-upload">').reference(D.get(["i18n_upload_file"],false),D,"h",["et","s"]).write('</label></button><a href="').reference(D.get(["providers"],false),D,"h").write('" class="providers" title="').reference(D.get(["i18n_media_form_providers_title"],false),D,"h").write('" data-event-id="media-providers">').reference(D.get(["i18n_media_form_providers"],false),D,"h",["et","s"]).write("</a>")
}function n(E,D){D=D.shiftBlocks(w);
return E.reference(D.get(["lix_treasury_upload"],false),D,"h")
}function l(E,D){D=D.shiftBlocks(w);
return E.helper("ne",D,{"else":j,"block":a},{"key":D.get(["lix_treasury_callout"],false),"value":"B"})
}function j(E,D){D=D.shiftBlocks(w);
return E.helper("ne",D,{"block":h},{"key":b,"value":"add_media_callout"})
}function h(E,D){D=D.shiftBlocks(w);
return E.block(D.getBlock("bigPromo"),D,{},null)
}function b(E,D){D=D.shiftBlocks(w);
return E.reference(D.getPath(false,["global_requestParams","promoId"]),D,"h")
}function a(E,D){D=D.shiftBlocks(w);
return E.block(D.getBlock("bigPromo"),D,{},null)
}function C(E,D){D=D.shiftBlocks(w);
return E.write('<div class="treasury-add-link').helper("eq",D,{"block":B},{"key":A,"value":"B"}).write('">').helper("eq",D,{"else":z,"block":y},{"key":x,"value":"B"}).write("</div>")
}function B(E,D){D=D.shiftBlocks(w);
return E.write("-upload")
}function A(E,D){D=D.shiftBlocks(w);
return E.reference(D.get(["lix_treasury_upload"],false),D,"h")
}function z(E,D){D=D.shiftBlocks(w);
return E.write('<a href="javascript:void(0)" class="media-add-promo evt-dispatch" data-event-id="media-add-promo" role="button">').reference(D.get(["i18n_media_link"],false),D,"h",["et","s"]).reference(D.getPath(false,["i18n","media_link"]),D,"h").write('</a><a href="javascript:void(0)" class="x-close evt-dispatch" data-event-id="media-close-promo-bar" role="button">').reference(D.get(["i18n_edit_add_a_link_close"],false),D,"h",["et","s"]).reference(D.getPath(false,["i18n","edit_add_a_link_close"]),D,"h").write("</a>")
}function y(E,D){D=D.shiftBlocks(w);
return E.write('<div class="treasury-add-link-inner"><div class="treasury-add-link-subsection treasury-add-link-left-subsection"><a href="javascript:void(0)" class="media-add-promo evt-dispatch" data-event-id="media-add-promo" role="button">').reference(D.get(["i18n_add_link"],false),D,"h",["et","s"]).reference(D.getPath(false,["i18n","add_link"]),D,"h").write('</a></div><div class="treasury-add-link-subsection"><label for="slideshare-file-input" class="treasury-file-upload media-add-promo">').reference(D.get(["i18n_upload_file"],false),D,"h",["et","s"]).reference(D.getPath(false,["i18n","upload_file"]),D,"h").write("</label></div></div>")
}function x(E,D){D=D.shiftBlocks(w);
return E.reference(D.get(["lix_treasury_upload"],false),D,"h")
}return p
})();
(function(){dust.register("treasury_add_link",dust.cache["tl/apps/profile/treasury/treasury_add_link"])
})();(function(){dust.register("tl/apps/profile/my_profile/embed/treasury_section_add",m);
function m(q,p){return q.write('<div class="treasury-section-add standard-form"><div class="triangle"></div>').exists(p.get(["items"],false),p,{"else":k,"block":g},null).write('<div class="add-link-upload"><span class="error"></span><div class="upload-form-container"><form name="treasury-add"><span class="error"></span><label for="url" class="ally-text">').section(p.get(["i18n"],false),p,{"block":a},null).write('</label><input class="add-link js-section-level-add media-url media-url-promo" type="text" onpaste="javascript:LI.Events.fire(\'media-url-paste\', this);" autocomplete="off" placeholder="http://" name="url" /></form></div><span class="or-separator">').section(p.get(["i18n"],false),p,{"block":o},null).write('</span><div class="add-upload" role="button"><label for="slideshare-file-input" class="treasury-file-upload">').section(p.get(["i18n"],false),p,{"block":n},null).write('</label></div><a href="').reference(p.get(["providers"],false),p,"h").write('" class="providers" title="').reference(p.get(["i18n_media_form_providers_title"],false),p,"h").write('" data-event-id="media-providers">').section(p.get(["i18n"],false),p,{"block":l},null).write('</a></div><div class="actions"><button class="js-section-level-continue btn-primary" type="button">').section(p.get(["i18n"],false),p,{"block":j},null).write('</button><button class="js-section-level-cancel btn-secondary" type="button">').section(p.get(["i18n"],false),p,{"block":h},null).write('</button></div><div class="progress-indicator"></div></div>')
}function k(q,p){return q.write("<div>").section(p.get(["i18n"],false),p,{"block":i},null).write("</div>")
}function i(q,p){return q.reference(p.get(["npe_add_to_summary"],false),p,"h")
}function g(q,p){return q.write('<label for="newSection-TreasuryUpdateForm">').section(p.get(["i18n"],false),p,{"block":f},null).write('</label><div class="entity-selection"><select type="singleselect" id="newSection-TreasuryUpdateForm" name="sectionList">').section(p.get(["items"],false),p,{"block":b},null).write("</select></div>")
}function f(q,p){return q.helper("eq",p,{"else":e,"block":d},{"key":c,"value":"experience"})
}function e(q,p){return q.reference(p.get(["npe_add_to_education"],false),p,"h")
}function d(q,p){return q.reference(p.get(["npe_add_to_position"],false),p,"h")
}function c(q,p){return q.reference(p.get(["section"],false),p,"h")
}function b(q,p){return q.write('<option value="').reference(p.get(["value"],false),p,"h").write('">').reference(p.get(["label"],false),p,"h").write("</option>")
}function a(q,p){return q.reference(p.get(["npe_add_link_to_content"],false),p,"h")
}function o(q,p){return q.reference(p.get(["edit_or"],false),p,"h")
}function n(q,p){return q.reference(p.get(["upload_file"],false),p,"h")
}function l(q,p){return q.reference(p.get(["edit_add_a_link_providers"],false),p,"h")
}function j(q,p){return q.reference(p.get(["edit_btn_continue"],false),p,"h")
}function h(q,p){return q.reference(p.get(["edit_btn_cancel"],false),p,"h")
}return m
})();
(function(){dust.register("treasury_section_add",dust.cache["tl/apps/profile/my_profile/embed/treasury_section_add"])
})();(function(){dust.register("tl/apps/profile/treasury/slideshare_account_binding_dialog",m);
function m(u,t){return u.section(t.get(["i18n"],false),t,{"block":k},null)
}function k(u,t){return u.write('<h1 class="header">').exists(t.get(["publishToSlideShareOptIn"],false),t,{"else":j,"block":h},null).write('</h1><div class="description">').exists(t.get(["publishToSlideShareOptIn"],false),t,{"else":f,"block":e},null).write('</div><div class="account-note">').exists(t.get(["multipleMatchesFound"],false),t,{"else":d,"block":a},null).write("</div>").exists(t.get(["slideShareModalImage"],false),t,{"block":o},null).write('<div class="cta-container"><div class="cta"><button id="opt-out" class="opt-out dialog-close">').exists(t.get(["publishToSlideShareOptIn"],false),t,{"else":n,"block":l},null).write('</button><button id="opt-in" class="opt-in dialog-submit dialog-submit-suppress">').exists(t.get(["publishToSlideShareOptIn"],false),t,{"else":i,"block":g},null).write('</button></div><div class="note">').reference(t.get(["slideshare_tc_note"],false),t,"h").write("</div></div>")
}function j(u,t){return u.reference(t.get(["slideshare_opt_out_header"],false),t,"h")
}function h(u,t){return u.reference(t.get(["slideshare_opt_in_header"],false),t,"h")
}function f(u,t){return u.reference(t.get(["slideshare_opt_out_label"],false),t,"h",["s"])
}function e(u,t){return u.reference(t.get(["slideshare_opt_in_label"],false),t,"h",["s"])
}function d(u,t){return u.exists(t.get(["publishToSlideShareOptIn"],false),t,{"else":c,"block":b},null)
}function c(u,t){return u.reference(t.get(["slideshare_opt_out_account_note"],false),t,"h",["s"])
}function b(u,t){return u.reference(t.get(["slideshare_opt_in_account_note"],false),t,"h",["s"])
}function a(u,t){return u.exists(t.get(["publishToSlideShareOptIn"],false),t,{"else":s,"block":r},null).write('<div class="matched-emails"><select id="slideshareMatchedEmails">').section(t.get(["matched_emails"],false),t,{"block":q},null).write('</select><span class="arrow" aria-hidden="true">&#xe019;</span></div>').helper("jsControl",t,{"block":p},{"name":"Dropdown"})
}function s(u,t){return u.reference(t.get(["slideshare_opt_out_accounts_note"],false),t,"h",["s"])
}function r(u,t){return u.reference(t.get(["slideshare_opt_in_accounts_note"],false),t,"h",["s"])
}function q(u,t){return u.write('<option value="').reference(t.getPath(true,[]),t,"h").write('">').reference(t.getPath(true,[]),t,"h").write("</option>")
}function p(u,t){return u.write('{triggerSelector: ".dropdown-trigger"}')
}function o(u,t){return u.write('<div class="preview-image"></div>')
}function n(u,t){return u.reference(t.get(["slideshare_opt_out_dont_publish"],false),t,"h")
}function l(u,t){return u.reference(t.get(["slideshare_opt_in_dont_publish"],false),t,"h")
}function i(u,t){return u.reference(t.get(["slideshare_opt_out_publish"],false),t,"h")
}function g(u,t){return u.reference(t.get(["slideshare_opt_in_publish"],false),t,"h")
}return m
})();
(function(){dust.register("slideshare_account_binding_dialog",dust.cache["tl/apps/profile/treasury/slideshare_account_binding_dialog"])
})();(function(){dust.register("tl/apps/profile/treasury/publish_to_slideshare_success_alert",a);
function a(c,b){return c.reference(b.get(["publish_to_slideshare_success"],false),b,"h").write(' <a target="_blank" href="').reference(b.get(["slideshowUrl"],false),b,"h").write('">').reference(b.get(["slideshare_view_it_here_label"],false),b,"h").write("</a>")
}return a
})();
(function(){dust.register("publish_to_slideshare_success_alert",dust.cache["tl/apps/profile/treasury/publish_to_slideshare_success_alert"])
})();LI.define("TreasurySortable");
LI.TreasurySortable=function(c,a,b){LI.TreasurySortable.superclass.constructor.call(this,c,a,b);
this.groupName=a;
this.twoRowClassName="media-wrapper-2row";
this.threeRowClassName="media-wrapper-3row"
};
YAHOO.lang.extend(LI.TreasurySortable,YAHOO.util.DDProxy,{checkDraggable:function(a){if(YDom.hasClass(a,"disabled")||YDom.hasClass(a,"editing")){return true
}},b4StartDrag:function(a,e){var b=YDom.getAncestorByClassName(this.getEl(),"treasury-container"),d="treasury-"+YDom.getAttribute(b,"data-section-id");
if(!this.groups[d]){for(var c in this.groups){this.removeFromGroup(c)
}this.addToGroup(d)
}LI.TreasurySortable.superclass.b4StartDrag.call(this,a,e)
},startDrag:function(){var a=this.getDragEl(),e=this.getEl(),c=this.getDragEl(),d="0",b="#F1F1F1";
if(this.checkDraggable(e)){return
}YDom.addClass(a,YDom.getAttribute(e,"class"));
YDom.addClass(a,LI.Sortable.Constants.RESUME_CLASS);
YDom.addClass(a,LI.Sortable.Constants.SORTABLE_CLASS);
YDom.addClass(a,LI.Sortable.Constants.DRAG_PROXY_CLASS);
YDom.addClass(e,LI.Sortable.Constants.IS_BEING_DRAGGED_CLASS);
a.innerHTML=e.innerHTML.replace(/id="(.*?)"/,'id="$1_0"').replace(/<iframe.*?<\/iframe>/,"");
if(this.config.additionalProxyClass){YDom.addClass(a,this.config.additionalProxyClass)
}YDom.removeClass(a,LI.Sortable.createGroupIdentifier(this.groupName));
YDom.setStyle(c,"padding",d);
YDom.setStyle(c,"background-color",b);
YAHOO.util.DragDropMgr.refreshCache()
},endDrag:function(){var b=this.getEl(),j=this.getDragEl(),d=j.id,g=this.id,c=YDom.getAncestorByClassName(b,"treasury-container"),e=this.twoRowClassName,h=this.threeRowClassName,m=YDom.hasClass(b,e),l=YDom.hasClass(j,e),f=LI.TREASURY_CONF.url.reorder,p="_reorderList",i="_section",n,o;
if(this.checkDraggable(b)){return
}var k=new YAHOO.util.Motion(j,{points:{to:YDom.getXY(b)}},0.2,YAHOO.util.Easing.easeOut);
k.onTween.subscribe(function(){YDom.setStyle(d,"visibility","visible")
});
k.onComplete.subscribe(function(){YDom.removeClass(g,LI.Sortable.Constants.IS_BEING_DRAGGED_CLASS);
if(!b.id){b.id=YDom.generateId()
}for(var q=0,t=Y$("#"+b.id+" iframe"),a=t.length,s;
q<a;
q++){s=null;
try{s=t[q].getAttribute("data-li-src");
if(s){t[q].src=s
}}catch(r){}}if(m!==l){if(l){YDom.replaceClass(b,h,e)
}else{YDom.replaceClass(b,e,h)
}}YDom.get(d).className="";
YDom.setStyle(d,"visibility","hidden");
YDom.get(d).innerHTML="";
YDom.setStyle(b,"width","");
YDom.setStyle(j,"padding","");
YDom.setStyle(j,"background-color","");
try{domNode.style.visibility="hidden";
domNode.style.visibility=""
}catch(r){}});
n=YDom.getAttribute(Y$(".media-cell:not(.media-add-frame)",c),"data-item-id");
o=YDom.getAttribute(c,"data-section-id");
$.ajax(f.replace(p,n).replace(i,o),{dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(a){},error:function(){}});
k.animate()
},onDragOver:function(l,c){var b=this.getEl(),j=YDom.get(c),p=YDom.getAncestorByClassName(j,"media-wrapper"),m=this.getDragEl(),n=YDom.getAncestorByClassName(b,"media-wrapper"),o=YDom.getAncestorByClassName(j,"media-wrapper"),g=this.twoRowClassName,i=this.threeRowClassName,f=(LI.Profile&&LI.Profile.data&&LI.Profile.data.isMyProfile),k=f?"184px":"194px",h=f?"282px":"296px",d=document.compareDocumentPosition?b.compareDocumentPosition(j)===2:(function(){var s=Y$(".media-cell",YDom.getAncestorByClassName(b,"treasury-container")),q,e;
for(var r=s.length-1;
r>=0;
r--){if(!q&&s[r]===b){q=r
}if(!e&&s[r]===j){e=r
}if(q!==undefined&&e!==undefined){if(q>e){return true
}else{return false
}}}}.call(b,j));
function a(e,w,v){var s=v?YDom.getNextSibling(e):YDom.getPreviousSibling(e),q=g,r=i,u=YDom.hasClass(w,r)?r:q,t=u===r?q:r;
if(!YDom.hasClass(s,"media-wrapper")){if(s){s=YDom.getFirstChild(s)
}else{s=YDom.getPreviousSibling(YDom.getAncestorBy(e))
}}if(s){s.insertBefore(w,v?YDom.getFirstChild(s):null);
YDom.replaceClass(w,u,t)
}if(!Y$(".media-add-frame",s).length){if(Y$(".media-cell",s).length!==(t===r?3:2)){if(v){a(s,YDom.getLastChild(s),true)
}else{a(s,YDom.getFirstChild(s),false)
}}}}if(this.checkDraggable(b)){return
}if(YDom.hasClass(j,i)){YDom.setStyle([b,m],"width",k);
YDom.replaceClass(m,g,i)
}else{YDom.setStyle([b,m],"width",h);
YDom.replaceClass(m,i,g)
}if(n!==o){if(d){p.insertBefore(b,j);
a(p,YDom.getLastChild(p),true)
}else{p.insertBefore(b,YDom.getNextSibling(j));
a(p,YDom.getFirstChild(p),false)
}}else{p.insertBefore(b,d?j:YDom.getNextSibling(j))
}YAHOO.util.DragDropMgr.refreshCache()
}});(function(bf,a2){var O="ontouchstart" in document.documentElement?"touchend":"click",K=LI.Events,bg=K.bind,H=K.fire,M=function(bx){try{WebTracking.trackUserAction(bx)
}catch(by){}},w=".treasury-container",B=".treasury-edit-form-container",s=".edit-my-profile",Z="active-edit treasury",U="editing",p="disabled",av="stealth",aa=".btn-media-edit",a="_treasuryId",bw="_section",o="_ssSlideshowId",P=aa+".active-edit.treasury",aS="#slideshare-file-input",ag=".treasury-section-add",Q=".media-wrapper > div",aq=".media-wrapper > div:not(.disabled)",aL=".media-image-wrapper",Y=".media-empty",G=".media-add-promo,.treasury-promo",i=".hidden-view-less,.hidden-view-more",ao=".media-add-frame",aV="treasury_edit",bi=".media-url",a0=".media-title",aZ=".media-description",aA=".upload-file-btn",bo="upload-failed",y="#ygddfdiv",aW="ok",b="show-media-error",aP="media-cancel",X="fetched",aB="processing",a1="no-summary",au="saving",aD=".continue-btn",bl=".edit-tools .add-treasury-dropdown",ba=".treasury-promo .treasury-file-upload",bc=".treasury-add-link-upload .treasury-file-upload",a6=".treasury-section-add .treasury-file-upload",N=".treasury-cta",at="hidden",a5=LI.browser,r=a5.ie7||a5.ie8,R="",L=90,aX=800,S=LI.htmlEncode,D="treasury_add_link",l="treasury_view_v2",aR="profile_thumbnail_view",I="occupation_options",q=a2("body"),A=a2(document),bq=a2("#profile"),F="small",a3="big",aU="none",af="url",e,C,k,bb,ah,aj,c,bp,ax,aQ,bd,J,z,bh,aT,bn,br,aO,x,bu,h=false,aC=false,ar=false,ay="",a4=[],am="",a9="",g=false,aN={UNKNOWN:0,BOUND:1,EMAIL_MATCHED:2,MULTIPLE_EMAILS_MATCHED:3,AUTO_SPAWNED:4,EMAIL_NOT_CONFIRMED:5},a8={attributes:{event:""},impression_position:1,impression_version:1},az="",n="",bv="",aY="",u="",f="treasury_slideshare",W="publishToSlideShare-TreasuryCreateForm",j=false,an=false,al=false,E=false;
function aF(){e=LI.TREASURY_CONF;
aj=e.i18n;
J=e.url;
c=e.tracks;
bp=e.lix;
ax=bp.facelift;
C=aj.treasury_error_rendering;
k=aj.treasury_remove_message;
bb=aj.treasury_invalid_url;
ah=a2("#wrapper");
aQ=a2("body,html");
z=a2("#background-summary-container");
j=bp.publishToSlideShareLix;
an=bp.slideShareModalImage;
al=bp.publishToSlideShareOptIn;
bu=e.defaultPublishToSlideShare;
a8.attributes.event="checkbox_displayed";
az=JSON.stringify(a8);
a8.attributes.event="optin_modal_image";
n=JSON.stringify(a8);
a8.attributes.event="optin_modal_no_image";
bv=JSON.stringify(a8);
a8.attributes.event="optout_modal_image";
aY=JSON.stringify(a8);
a8.attributes.event="optout_modal_no_image";
u=JSON.stringify(a8);
A.on(O,".done-edit-profile",function(){a2(B+" .x-close").trigger(O);
if(z.hasClass(a1)&&z.find(w+" .media-cell[data-item-id!=-1]").length>0){z.removeClass(a1)
}});
a2(w+" script").remove();
q.on("switch-edit",function(){a2(w+" script").remove()
});
q.on(O,w+"."+bo+" .error-msg a",function(by){var bx=new LI.Dialog();
by.preventDefault();
bx.open({content:{title:aj.upload_support_files_title,node:"file-supported-dialog"},className:"dialog-v2",name:"treasury-upload-supports",type:"task-modal",width:500})
});
if(bp.newProfileEdit){bg("treasury-open-item",function(bx){if(!bx.closest(".active-edit").length){H("media-edit-item",bx.find(aa))
}})
}}q.on(O,s+".active-edit .media-add-promo",function(bx){bx.preventDefault()
});
function ak(){a2(aa).removeClass(p);
a2(Q).removeClass(p).removeClass(U);
a2(G).removeClass(p);
a2(i).removeClass(p);
a2(y).removeClass(av);
a2(bi).val(R);
a2(P).removeClass(Z);
a2(ao).hide();
a2(Y).hide();
bd=null;
a2(w).removeClass(bo);
a2.fn.Profile.fire(a2.fn.Profile.EVENTS.FORM_CLOSED)
}function ai(){a2(aa).addClass(p);
a2(Q).addClass(p);
a2(G).addClass(p);
a2(y).addClass(av);
a2.fn.Profile.fire(a2.fn.Profile.EVENTS.FORM_OPENED)
}function m(bz,bC){var bB=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,by,bD,bA,bE,bx;
if(bC.hasClass(aB)){return
}bC.addClass(aB);
if(bC.hasClass("media-url-promo")){bd=bz;
bA=bC.closest(".treasury-promo").parent();
bx=bA.closest(".background-summary");
bA=bx.length?bx:bA;
bA.find(".media-add-action").trigger(O);
bC.removeClass(aB)
}else{if(bd){bC.val(bd)
}bz=a2.trim(bC.val());
by=bC.closest("li").find(".media-input .error");
by.html(R);
if(!bz.length){bC.removeClass(aB);
return by.html(bb)
}if(bz.length>e.maxUrlLength){bC.removeClass(aB);
return by.html(aj.error_url_too_long.replace("{0}",bz.length-e.maxUrlLength))
}bE=bC.closest(".media-wrapper");
bE.addClass(au);
aM(bz,bC,bE,by)
}}function aM(by,bz,bx,bD,bC){var bF,bE,bA=true,bB;
if(bC){bF=bC.find(".media-cell").last();
bE=bF.closest(".media-wrapper");
bA=bF.hasClass("media-wrapper-2row");
bB=bE.find(".media-cell").index(bF)
}a2.ajax(J.add.replace("_url",encodeURIComponent(by)),{dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(bJ){var bI,bH={add_new:true,add_url:true,i18n:aj,lix:bp},bK,bG;
bx.removeClass(au);
if(!bJ||!bJ.content||!bJ.content.treasury_form||bJ.content.treasury_form.errors){bI=bJ&&bJ.content&&bJ.content.treasury_form&&bJ.content.treasury_form.errors||aj.error_fetching_data;
bz.removeClass(aB);
if(bp.newProfileEdit){return LI.injectAlert(bI,"error",null,false,true)
}else{return bD.text(bI)
}}bK=bJ.content.treasury_form;
bK.i18n=aj;
if((bH.treasurygeneralerror=bK.treasurygeneralerror)||(bH.treasuryurlnotsupport=bK.treasuryurlnotsupport)||(bH.treasuryurlinvalid=bK.treasuryurlinvalid)){if(bp.newProfileEdit){bC.find(ao).hide();
if(bK.treasuryurlnotsupport){bG=aj.error_url_not_supported
}else{if(bK.treasuryurlinvalid){bG=aj.error_invalid_url
}else{bG=aj.error_general_error
}}LI.injectAlert(bG,"error",null,false,true);
return
}else{bH.url=bz.closest(B+" .media-url.media-add-new").val();
bH.providers=J.providers;
dust.render(aV,bH,function(bQ,bM){var bL,bP,bO,bN;
if(bQ){bN=aj.error_rendering_data+" ("+S(bQ)+")";
if(bp.newProfileEdit){LI.injectAlert(bN,"error",null,false,true)
}else{bD.html(bN)
}}else{bL=bz.closest(B);
bP=bL.parent();
bO=bL.find(".triangle").prop("class");
bL.replaceWith(bM);
bP.find(".triangle").addClass(bO);
a2("#media-url").focus()
}});
bz.removeClass(aB);
return
}}bK.providers=J.providers;
bK.fetched=true;
dust.render(aV,bK,function(bQ,bN){var bL,bW,bS,bU,bR,bV,bM,bX,bP,bO,bT;
if(bQ){bT=aj.error_rendering_data+" ("+S(bQ)+")";
if(bp.newProfileEdit){LI.injectAlert(bT,"error",null,false,true)
}else{bD.html(bT)
}}else{if(bC){bC.append(a2("<div>").addClass("media-wrapper edit add-new"));
bC.find(".media-wrapper.add-new").append(a2("<div>").addClass("treasury-edit-form-container"));
bL=bC.find(".treasury-edit-form-container");
bC.find(".media-edit.media-add-new").removeClass("processing")
}else{bL=bz.closest(B)
}bW=bL.parent();
bU=bL.find(".triangle").prop("class");
bL.replaceWith(bN);
bW.addClass(X);
bS=bW.find(".triangle");
bS.addClass(bU||aK(bA,bB));
if(ax){bO={lix_facelift:"B",images:[{url:bK.html.images.value,width:"",height:""}],title:bK.html.customTitle.value};
dust.render(aR,bO,function(b0,bZ){var b1=a2(bZ),b2=bW.closest(w).find(".media-cell.media-add-frame"),bY=b1.eq(0);
b2.find(".media-data").replaceWith(bY)
})
}else{bW=bW.prev().find(".media-add-frame");
bV=bK.html.customTitle.value;
bR=bK.html.images.value;
if(bV){bW.find(".text-box p").html(S(bV))
}bW.find(aL).html('<img class="media-image" src="'+S(bR)+'"/>'+'<span class="centering-helper"></span>');
bP=new Image();
bP.onload=function(){bR=bW.find(aL+" .media-image");
bM=bR.width();
bX=bR.height();
bR.attr("data-width",bM);
bR.attr("data-height",bX)
};
bP.src=bR;
if(bP.complete){}}bW.parent().next().find("input:visible:first").focus()
}});
bz.removeClass(aB)
},error:function(){bx.removeClass(au);
bz.removeClass(aB);
if(bp.newProfileEdit){LI.injectAlert(aj.error_fetching_data,"error",null,false,true)
}else{bD.html(aj.error_fetching_data)
}}})
}function aI(bx){var bz=["media-wrapper-2row","media-wrapper-2row","media-wrapper-3row","media-wrapper-3row","media-wrapper-3row"],by=bz.join(" "),bI=[],bK=[],bH=0,bE=0,bA,bG,bJ,bC,bB,bD,bF;
bx.find(".media-wrapper").each(function(){var bL=a2(this);
bK.push(bL);
bL.find("> div").each(function(){var bM=a2(this);
bI.push(bM)
})
});
bC=bK.length;
bA=false;
if(bI.length===6){bx.find(".hidden-view-more,.hidden-view-less").hide()
}while(bC--){bJ=bK[bE++];
bB=0;
bD=bA?3:2;
bA=!bA;
if(!bI.length){bJ.remove();
break
}while(bB<bD&&bI.length){bG=bI.shift();
bG.removeClass(by);
bG.addClass(bz[bH++]);
bG.appendTo(bJ);
bH=(bH>4)?0:bH;
bB++
}}bG=bx.find(ao);
if(bG.length){bF=bG.parent();
if(bF.children().length===1){bF.addClass("media-add-frame")
}}}bn=function(bA,bD){var bz,by,bx,bC;
if(!bz){dust.render("tl/apps/profile/v2/embed/dialog",{message:k,submitButton:aj.edit_btn_remove_it,cancelButton:aj.edit_btn_cancel},function(bF,bE){bz=bF||bE
})
}A.on(O,".media-remove-dialog button.dialog-submit-suppress",function(){bC.close();
bx(by)
});
function bB(bE,bF){by=bE;
bx=bF;
bC=new LI.Dialog();
bC.open({content:{title:aj.edit_remove_dialog_title,html:bz},width:400,webtrack:{key:c.remove_confirmation},className:"media-remove-dialog dialog-v2",name:"media-remove",type:"task-modal"})
}bn=bB;
bB(bA,bD)
};
A.on("paste propertychange",bi,function(){var bx=a2(this);
setTimeout(function(){m(bx.val(),bx)
},250)
}).on("keydown",bi,function(by){var bx=a2(this);
if(by.keyCode===13&&!bx.hasClass(aB)){by.preventDefault();
m(bx.val(),bx)
}}).on(O,aD,function(){var bx=a2(bi);
m(bx.val(),bx)
}).on("keydown",".js-section-level-add",function(bx){if(bx.keyCode===13){var by=a2(this);
bx.preventDefault();
aw(by,T())
}}).on(O,".js-section-level-continue",function(bx){var by=a2(ag+" .js-section-level-add");
aw(by,T())
}).on(O,".js-section-level-cancel",function(bx){bx.preventDefault();
a2(ag).fadeOut("fast",function(){v()
})
}).on("paste propertychange",a0,function(){var bx=a2(this);
setTimeout(function(){a2(P).parent().find("p").html(S(bx.val()))
},250)
}).on("keydown",a0,function(by){var bx=a2(this);
if(by.keyCode===13){by.preventDefault();
return bx.closest("form").find(".btn-primary").trigger(O)
}setTimeout(function(){var bA=bx,bz=a2.trim(bA.val()),bC=bA.closest("li").find("span.error"),bB=bA.closest("form").find("button.btn-primary");
if(bz.length>e.maxTitleLength){if(!bh){bh=true;
bB.prop("disabled",true)
}return bC.html(aj.error_title_too_long.replace("{0}",bz.length-e.maxTitleLength))
}else{if(bh){bC.html(R);
bh=false
}}a2(P).parent().find("p").html(S(bx.val()));
if(!bh&&!aT){bB.prop("disabled",false)
}},0)
}).on("keydown",aZ,function(){var bx=a2(this);
setTimeout(function(){var by=bx,bB=a2.trim(by.val()),bA=by.closest("li").find("span.error"),bz=by.closest("form").find("button.btn-primary");
if(bB.length>e.maxDescriptionLength){if(!aT){aT=true;
bz.prop("disabled",true)
}return bA.html(aj.error_description_too_long.replace("{0}",bB.length-e.maxDescriptionLength))
}else{if(aT){bA.html(R);
aT=false
}}if(!bh&&!aT){bz.prop("disabled",false)
}},0)
}).on("submit",".treasury-form-container form",function(by){var bx=a2(this).find(bi);
by.preventDefault();
m(bx.val(),bx)
}).on("click",".treasury-form-container .providers, "+w+" .providers, .treasury-form-container-upload .providers, "+ag+" .providers",function(bx){bx.preventDefault();
LI.popup(a2(this).attr("href"),{})
});
bg("media-url-paste",function(bx){if(r){setTimeout(function(){m(bx.value,a2(bx))
},250)
}});
function aw(bA,bx){var bz=a2.trim(bA.val()),by=a2(ag).find(".error");
by.html(R);
if(!bz.length){return by.html(bb)
}if(bz.length>e.maxUrlLength){return by.html(aj.error_url_too_long.replace("{0}",bz.length-e.maxUrlLength))
}v();
if(bp.newCta){t().hide()
}H("media-add-promo",bA,bx,{});
aM(bA.val(),a2(""),a2(""),by,bx)
}function v(){a2(ag).addClass(at)
}function T(){var bx=a2("#newSection-TreasuryUpdateForm").val()||"",by=bx.toLowerCase()==="summary";
return bq.find('.treasury-container[data-section-id="'+(by?"":bx)+'"]')
}function d(bx){bx.addClass("editing");
bx.closest(".entity").addClass("active-edit")
}function t(bx){bx=bx||T();
return bx.closest(".entity-container,.background-summary").find(".treasury-cta")
}function bk(bA){var bz,bx,by;
if(!bp.newCta){return
}bz=a7(bA);
bx=bA.closest(".background-summary").find(".edit-tools .edit-treasury");
if(bz>0){by=t(bA);
if(bp.shouldPreserveNewCta&&by.data("is-displayed")){by.show()
}else{by.hide();
bx.show()
}}else{t(bA).show().data("is-displayed",true);
bx.hide()
}}function a7(bx){return bx.find(".media-cell").not(".media-add-frame").length
}bg("media-add-promo",function(bA,by,bx){var bD=by||bA.closest(".treasury-add-link,.treasury-add-link-upload").siblings(w),bC=bD.find(".media-add-frame"),bz=bx&&bx.uploadFailed,bB=bx&&bx.errorType;
af=bA?"url":"file";
if(bz||!a2(s).closest(".active-edit").length){bD.addClass("adding");
if(bz){bD.addClass(bo)
}else{bD.removeClass(bo)
}bD.siblings(".hidden-view-more").trigger(O);
bD.find(ao).show();
if(bp.newProfileEdit&&af!=="file"){bC.find(".media-edit.media-add-new").addClass("processing");
d(bC);
aQ.animate({scrollTop:bD.find(".media-cell.media-add-frame").offset().top-L},aX)
}else{H("media-edit-item",bC.find(aa),bB)
}bD.removeClass("adding")
}});
bg("media-close-promo",function(by){var bx=by.closest(".treasury-promo");
bx.fadeOut(function(){bx.remove()
})
});
bg("media-close-promo-bar",function(by){var bx=by.parent();
bx.fadeOut(function(){bx.remove()
})
});
bg("media-add",function(by){var bx;
a2("#add-media-callout").fadeOut();
if(!ah.hasClass("active-edit")&&!by.hasClass(aB)){bx=by.data("selector");
by.addClass(aB);
H("media-add-promo",by,a2(bx),{uploadFailed:by.hasClass(bo)});
by.removeClass(aB)
}});
bg("media-section-add",function(by){if(by.hasClass(aB)){return
}var bE=a2(".media-cell").data("item-id"),bD="",bH=by.data("section-hook"),bB=a2(ag),bz,bN,bF=bp.newProfileEdit?J[bH]:J.get_update.replace(a,bE).replace(bw,bD);
by.addClass(aB);
function bG(){by.removeClass(aB);
H(b,aj.error_fetching_data)
}function bJ(bP){if(bp.newProfileEdit){return !(bP.status===aW&&bP.content)
}else{return !(bP.status===aW&&bP.content&&bP.content.treasury_form&&!bP.content.treasury_form.errors)
}}function bL(bR,bP){var bQ,bS;
if(!(bP&&bR)){return
}bP.after(bR);
bQ=by.closest(".entity-container");
bS=bQ.find(".treasury-container").data("section-id");
if(bS){bR.find("#newSection-TreasuryUpdateForm").val(bS)
}be(bR)
}function bC(){bB.remove()
}function bI(){by.removeClass(aB)
}function bA(bR,bQ){var bS,bP,bT;
if(!bQ){return
}bS=a2(bQ);
bP=by.closest(".entity-container");
bT=bP.find(".treasury-cta");
bC();
if(bT.length&&bT.is(":visible")){bM(bS,bT.find(".treasury-document"))
}bL(bS,bP);
bI()
}function bK(bR,bQ){var bU=by.closest(".sum-buttons"),bS=by.closest(".treasury-cta"),bT,bP;
bC();
bT=a2(bQ);
if(bU.length){bP=bU.parent()
}else{if(bS.length){bP=bS.parent()
}}if(by.hasClass("treasury-video")||by.hasClass("treasury-link")){bT.find(".add-upload,.or-separator").hide()
}bM(bT,by);
bL(bT,bP);
bI()
}function bM(bP,bR){var bQ;
if(!(bP&&bR)){return
}bP.addClass("with-triangle");
bQ=bR.position().left+bR.outerWidth()/2;
bQ-=10;
bP.find(".triangle").css("left",bQ)
}function bO(bQ,bP){bB.remove();
by.closest(".header").after(bP);
by.removeClass(aB);
be(bB)
}function bx(bP){var bQ;
bP=bP||{};
bP.i18n=aj;
bP.providers=J.providers;
bP.section=by.closest("#background-experience").length?"experience":"education";
if(by.closest(".add-treasury-entity-control").length){bQ=bA
}else{if(by.closest(".sum-buttons, .treasury-cta").length){bQ=bK
}else{bQ=bO
}}dust.render("treasury_section_add",bP,bQ)
}if(bF){bz=by.closest(".section-container");
bN=bz.data(I);
if(bN){bx(bN)
}else{a2.ajax(bF,{type:"GET",dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(bP){var bQ={};
if(!bJ(bP)){if(bp.newProfileEdit){bQ.items=bP.content.treasuryOption?bP.content.treasuryOption.options:false
}else{bQ.items=bP.content.treasury_form.html.newSection.options
}bx(bQ);
bz.data(I,bQ)
}else{bG()
}},error:bG})
}}else{bx()
}});
function aH(bz){var bx,by;
bx=bz.lastIndexOf("\\");
if(bx>=0){bz=bz.substring(bx+1)
}by=bz.lastIndexOf(".");
if(by>0){bz=bz.substr(0,by)
}return bz
}q.on("upload-complete",function(bG,bB){var bC=br.find(ao),bJ=br.data("section-id"),bD=bC.find(aL),bz=a2(aS).attr("data-li-uploaded-filename"),bE,bF,bx,by,bI,bH={};
if(bB){bF=bB.title||"";
bx=bB.image||"";
if(!bF&&bz){bF=aH(bz)
}br.addClass("adding");
br.find(".progress").remove();
if(ax){bE={lix_facelift:"B",images:[{url:bx,title:S(bF)}],title:S(bF)};
dust.render(aR,bE,function(bL,bK){br.find(".media-cell.media-add-frame .media-data").replaceWith(a2(bK).eq(0))
})
}else{bD.children(".media-image").remove();
bD.prepend(a2("<img>").addClass("media-image").attr("src",bx));
bC.find(".text-box").find("p").html(S(bF))
}by=J.action.match("[?&]csrfToken=([^&]+)");
var bA={add_url:false,i18n:aj,action:J.action,html:{customTitle:{id:"customTitle-TreasuryCreateForm",value:bF,name:"customTitle"},customDescription:{id:"customDescription-TreasuryCreateForm",value:"",name:"customDescription"}},csrfToken:{id:"csrfToken-TreasuryCreateForm",value:by?by[1]:"",name:"csrfToken"},memberId:e.memberId,sectionId:bJ,code:{id:"code-TreasuryCreateForm",value:bB.hash,name:"code"},isImage:{id:"isImage-TreasuryCreateForm",value:""+bB.isImage,name:"isImage"},slideshow:{id:"slideshow-TreasuryCreateForm",value:bB.slideshowstr,name:"slideshowstr"}};
bI=bA.html;
if(j){bA.publishToSlideShareLix=j;
if(!bB.isImage){if(h){bH=az;
bI.publishToSlideShare={id:W,value:true,name:"publishToSlideShare",checkedByDefault:bu}
}else{if(al){if(an){bH=n
}else{bH=bv
}}else{if(an){bH=aY
}else{bH=u
}}bI.publishToSlideShareHidden={id:W,value:E,name:"publishToSlideShare"};
bI.ssMoveToEmail={id:"ssMoveToEmail-TreasuryCreateForm",value:"",name:"moveSlideshowToEmail"};
bI.newSlideShareAccountCreated={id:"newSlideShareAccountCreated-TreasuryCreateForm",value:aC,name:"newSlideShareAccountCreated"}
}WebTracking.trackUserImpression(f,bH,true);
bI.ssSlideshowId={id:"slideshowId-TreasuryCreateForm",value:am,name:"ssSlideshowId"},bI.ssSlideshowUrl={id:"slideshowUrl-TreasuryCreateForm",value:a9,name:"ssSlideshowUrl"}
}}if(a2(".upload-again").length){br.find(".media-wrapper.add-new.fetched").show()
}dust.render(aV,bA,function(bL,bK){br.find(".media-wrapper.fetched").html(bK);
aG(bL,bK,bC.find(aa),true)
});
br.removeClass("adding")
}}).on("upload-file-complete",function(bx,bz){if(j){am=bz.slideshow_id;
a9=bz.slideshow_url;
aC=false;
E=true;
switch(bz.account_status){case aN.BOUND:h=true;
break;
case aN.EMAIL_MATCHED:ar=true;
ay=bz.bound_email;
break;
case aN.MULTIPLE_EMAILS_MATCHED:ar=true;
ay=bz.bound_email;
g=true;
a4=bz.matched_emails;
var by=_.indexOf(a4,ay);
if(by>-1){a4.splice(by,1);
a4.unshift(ay)
}break;
case aN.AUTO_SPAWNED:aC=true;
ar=true;
ay=bz.bound_email;
break;
case aN.EMAIL_NOT_CONFIRMED:E=false;
break
}}}).on("upload-active",function(bx,by){setTimeout(function(){var bB=br.find(ao),bA=bB.find(aa),bz=bA.closest(".media-cell");
br.siblings(".hidden-view-more").trigger(O);
if(ax){bB.find(".media-data").html(a2("<div>").addClass("media-placeholder"));
bB.find(".media-edit.media-add-new").addClass("processing")
}else{bB.find(".media-image").remove();
bB.find(".text-box").find("p").html("");
bB.find(".outer").append(a2("<span>").addClass("progress"))
}bB.show();
ai();
bA.removeClass(p);
bz.removeClass(p).addClass(U);
a2(i).addClass(p);
if(bp.newProfileEdit){v();
d(bB)
}if(bp.newCta){t().hide()
}aQ.animate({scrollTop:bz.offset().top-L},aX)
},0)
}).on("upload-progress",function(bx,by){}).on("upload-error",function(bx,by){setTimeout(function(){if(ax){br.find(ao).find(".media-edit.media-add-new").removeClass("processing")
}br.find(".media-wrapper.fetched").remove();
br.find(".progress").remove();
af="file";
H("media-add-promo","",br,{uploadFailed:true,errorType:by.type})
},50)
});
function aG(bF,by,bx,bE){var bK=bx.closest(".media-cell"),bH=bK.closest(".media-wrapper"),bI=bH.closest(w).data("section-id"),bC=bx.hasClass("media-add-new"),bA=bC?" add-new":"",bJ=bE?" fetched":"",bz=bK.hasClass("media-wrapper-2row"),bB=bH.find(".media-cell").index(bK),bG,bD;
bx.removeClass(aB);
if(bF){H(b,bF)
}else{by='<div class="media-wrapper edit'+bA+bJ+'">'+by+"</div>";
bG=bH.after(a2(by)).next();
bG.find("input:visible").first().focus().select();
bx.addClass(Z);
bD=bG.find(".triangle");
bD.addClass(aK(bz,bB));
ai();
bx.removeClass(p);
bK.removeClass(p).addClass(U);
a2(i).addClass(p);
aQ.animate({scrollTop:bK.offset().top-L},aX,function(){if(bd){bd=null;
bG.find("input:visible").first().trigger("propertychange")
}})
}}bg("media-edit-item",function(bz,bB){var bC=bz.closest(w),by=bC.data("section-id"),bA=bz.closest(".media-cell");
function bx(){bz.removeClass(aB);
H(b,aj.error_fetching_data)
}if(bz.hasClass(aB)){return
}bz.addClass(aB);
if(bp.newProfileEdit){d(bA)
}if(bz.hasClass("media-add-new")){if(ax){V(bC)
}else{bA.find(aL).html(R).append(a2("<span>").addClass("centering-helper"));
bA.find(".text-box p").html(R)
}dust.render(aV,{add_new:true,i18n:aj,add_url:af==="url",url:bd||"http://",lix:bp,providers:J.providers,errorType:bB},function(bE,bD){aG(bE,bD,bz)
});
a2(".media-add-frame .media-image").removeAttr("data-width").removeAttr("data-height")
}else{a2.ajax(J.get_update.replace(a,bz.data("id")).replace(bw,by),{type:"GET",dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(bD){var bE;
if(bD.status===aW&&bD.content&&bD.content.treasury_form&&!bD.content.treasury_form.errors){bE=bD.content.treasury_form;
bE.i18n=aj;
bE.providers=J.providers;
bE.enableMovingTreasuryObject=e.enableMovingTreasuryObject;
dust.render(aV,bE,function(bG,bF){aG(bG,bF,bz)
})
}else{bx()
}},error:bx})
}});
function V(by){var bx=by.find(".media-cell.media-add-frame");
if(!bx.find(".media-placeholder").length){dust.render(aR,{lix_facelift:"B"},function(bA,bz){if(!bA){bx.find(".media-data").replaceWith(a2(bz).eq(0))
}})
}}function ap(bA,by){var bz={"i18n":aj,"lix_treasury_upload":"B"},bx;
if(by===F){bz.showSmallPromo=true
}else{if(by===a3){bz.showBigPromo=true;
bz.lix_treasury_callout="A";
bz.lix_treasury_viewer="control";
bz.img=img
}}dust.render(D,bz,function(bC,bB){if(bC){showError(C)
}else{bA.before(bB)
}});
if(by===a3){bx=a2(".treasury-add-link-upload");
if(bx.length){dust.render(D,bz,function(bC,bB){if(bC){showError(C)
}else{bx.replaceWith(bB)
}})
}}}function bt(bA){var bz=null,bx,by;
if(!bA){return aU
}if(a7(bA)){return aU
}bx=["summary","experience","education"];
a2.each(bx,function(bC,bB){var bD=bA.closest("#background-"+bB);
if(bD.length){bz=bD;
return false
}});
if(!bz){return aU
}by=bz.find(w).first();
if(bA.length&&by.length&&bA[0]===by[0]){return F
}return aU
}bg(aP,function(bB,bz,bC){var by=bB.closest(B),bA=by.parent(),bx=a2(a0);
if(!bz&&bx.length){a2(P).parent().find("p").html(S(bx.data("original-text")))
}by=bA.hasClass("media-wrapper")?bA:by;
if(a2(".upload-again").length){ae(by)
}if(bp.newProfileEdit){by.closest(".entity").removeClass("active-edit")
}by.fadeOut("fast",function(){if(ax){V(bB.closest(w))
}if(bp.newCta){bk(by.closest(w))
}by.remove();
ak();
if(bC){bC()
}});
if(!bz&&(h||ar)){WebTracking.trackUserAction(f,null,true,"cancelled")
}M(c.media_edit_cancel)
});
function aE(bA){var by=bA.closest(B),bC=by.closest(w),bD=by.parent(),bz=bA.data("id"),bF=bA.closest(w).data("section-id"),bB,bx=J.remove.replace(a,bz).replace(bw,bF);
by=bD.hasClass("media-wrapper")?bD:by;
if(j){var bE=bA.data("ssslideshowid");
bx=bx.replace(o,bE)
}a2.ajax(bx,{dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(){H("media-item-removed",{id:bz})
},error:function(){H(b,aj.error_removing_data)
}});
bB=a2(aq);
by.fadeOut("fast",function(){var bG,bH;
by.remove();
bB.remove();
aI(bC);
bH=a7(bC);
if(bH===5){bC.removeClass("restrict");
bC.siblings(".hidden-view-more, .hidden-view-less").remove()
}ak();
bG=bp.newProfileEdit?aU:bt(bC);
if(bG!==aU){ap(bC,bG)
}if(bp.newProfileEdit){bC.closest(".entity").removeClass("active-edit")
}if(bp.newCta){bk(bC)
}})
}bg("media-remove",function(bx){bn(bx,aE)
});
function ad(bx){bx.find(".treasury-promo, .treasury-add-link, .treasury-add-link-upload").remove()
}function bj(bx){return bx.closest(".background-experience, .background-education, .background-summary")
}function ac(bz){var bA=bz.closest("form"),bK=bA.parent().parent(),bH=bK.closest(w),bC=bA.attr("action"),bJ,bL,bD,bB,bG,bM,bI,bF,by,bE,bx;
bJ=bA.find(".media-title");
bL=bA.find(".media-description");
bB=bA.find("li:first span.error");
bD=bJ.closest("li").find("span.error");
bB.html(R);
bE=bA.find(".publish-to-slideshare");
by="do_not_publish";
if((h&&bE.is(":checked"))||(ar&&bE.val()==="true")){by="publish"
}WebTracking.trackUserAction(f,null,true,by);
if(!a2.trim(bJ.val())){bJ.focus();
return bD.html(aj.edit_error_please_enter_title)
}bA.find("#memberId").val(e.memberId);
bA.find("#sectionId").val(bH.data("section-id"));
bK.addClass(au);
a2.ajax(bC,{type:"POST",dataType:"json",headers:{"X-IsAJAXForm":"1"},data:bA.serialize(),success:function(b5){var bT,b4,b3,bY,bV,b0,bX,bQ,bR,b2=bK.hasClass("add-new"),bO=bp.reorder,bW,b1,bN,bP,bU,bZ,bS;
bK.removeClass(au);
if(!b5||b5.status!==aW||!b5.content||b5.content.errors){return bB.html(aj.error_editing_data)
}bY=b2?b5.content.id:bz.data("id");
b0=b2?b5.content.images[0].width:bz.data("width");
bX=b2?b5.content.images[0].height:bz.data("height");
if(b2){bZ=b5.content;
bZ.isAddNew=true
}else{bZ={id:bY,title:bJ.val(),description:bL.val()}
}if(b2){bT=bK.prev().find(".media-add-frame.cell");
b4=bT.parent();
if(bp.newProfileEdit){b4.removeClass("media-empty media-add-frame stealth").css("display","")
}else{b4.removeClass("media-empty media-add-frame")
}bV=b4.closest(w);
bG=b5.content.slideshow_url;
b3={addNew:true,whichRow:bT.hasClass("media-wrapper-2row")?"2row":"3row",id:bY,images:[{url:bT.find(ax?".thumbnail":".media-image").attr("src"),width:b0,height:bX}],formData:{group:"treasury-"+bV.attr("data-section-id")},title:bJ.val(),i18n_Edit:"Edit",lix_treasury_reorder:bO?"B":"control",lix_facelift:ax?"B":"control",slideShareUrl:bG,i18n_view_on_slideshare:aj.view_on_slideshare};
dust.render(l,b3,function(b7,b6){if(b7){showError(C)
}else{bT.before(b6);
if(bO){LI.Controls.parseFragment(bV);
setTimeout(function(){bV.find("script").remove()
},0)
}}});
bQ=a2('<div class="media-wrapper media-empty"></div>');
bT.appendTo(bQ);
b4.after(bQ);
bT.find(".media-image").removeAttr("data-width").removeAttr("data-height");
if(ax){V(bV)
}if(bp.newCta){bk(bH)
}ad(bj(bH));
bS=a2("#summary-item .treasury-promo, #background-experience .treasury-promo, #background-education .treasury-promo");
if(bS.length){dust.render(D,{"i18n":aj,"showSmallPromo":true,"lix_treasury_upload":(bp.enableUpload?"B":"control")},function(b7,b6){if(b7){showError(C)
}else{bS.replaceWith(b6)
}})
}}else{if(e.enableMovingTreasuryObject){bR=a2(".section-select option:selected");
if(!bR.hasClass("original")){bW=a2(".btn-media-edit.active-edit").closest(".media-cell");
b1=bW.closest(w);
bN=a2(w+'[data-section-id="'+bR.val()+'"]');
if(!bN.length){bN=a2(w+'[data-section-id=""]')
}bP=a2('<div class="media-wrapper"></div>');
bT=bN.find(".media-cell.media-add-frame.cell");
bU=bT.parent();
bW.appendTo(bP);
bU.before(bP);
setTimeout(function(){aI(b1);
aI(bN);
var b6=bW.siblings(":visible").last();
if(b6.length){b6.after(bW)
}if(bp.newCta){bk(b1);
bk(bN)
}ad(bj(bN))
},500)
}}}H("media-item-changed",bZ);
H(aP,bz.next(),true,function(){if(b2){aI(bV)
}});
if(j){if(bG){bx={publish_to_slideshare_success:aj.publish_to_slideshare_success,slideshare_view_it_here_label:aj.slideshare_view_it_here_label,slideshowUrl:bG};
dust.render("tl/apps/profile/treasury/publish_to_slideshare_success_alert",bx,function(b7,b6){bF=b7||b6
});
LI.injectAlert(bF,"success",null,true,true)
}ar=false;
h=false
}},error:function(){bK.removeClass(au);
bB.html(aj.error_editing_data)
}})
}function ab(bx){return function(){ac(bx);
bf.oUISettings.saveSettings("defaultPublishToSlideShare",bu)
}
}function bs(by){by.parents("form").find("#"+W).val("true");
if(g){var bx=a2("#slideshareMatchedEmails option:selected").val();
by.parents("form").find("#ssMoveToEmail-TreasuryCreateForm").val(bx)
}bu=true
}x=function(by,bC,bE){var bx="",bB=LI.TREASURY_CONF.i18n,bA={slideShareModalImage:an,publishToSlideShareOptIn:al,multipleMatchesFound:g,i18n:bB},bD,bz;
if(g){bA.matched_emails=a4
}else{bA.bound_email=ay
}bA.i18n=bB;
dust.render("tl/apps/profile/treasury/slideshare_account_binding_dialog",bA,function(bG,bF){bx=bG||bF
});
bz=function(bF,bG,bH){bD=new LI.Dialog();
bu=false;
bF.parents("form").find("#"+W).val("false");
bD.open({content:{title:bB.reach_more_professionals,html:bx},width:500,className:"slideshare-account-binding-dialog",name:"slideshare-account-binding-name",type:"task-modal"})
};
bz(by,bC,bE);
x=bz;
bD.closeEvent.subscribe(bE(by),null,this);
A.on(O,".slideshare-account-binding-dialog button.dialog-submit",function(){bC(by);
bD.close()
})
};
bg("media-save",function(bx){if(j&&ar){x(bx,bs,ab)
}else{ac(bx)
}});
function aJ(bz,by){var bx=a2("#treasury-slideshare-upload-form");
br=bz.closest(".edit-default, .editable-item").find(w);
if(!aO){aO=new LI.UploadStateManager()
}by.append(bx)
}function ae(bx){var by=a2("#treasury-slideshare-upload-form");
if(by.closest(bx).length){a2("#background").append(by)
}}function aK(by,bz){var bx;
if(by){bx=bz?"two-right":"two-left"
}else{if(bz===2){bx="three-right"
}else{if(bz===1){bx="three-center"
}else{bx="three-left"
}}}return bx
}q.on("mouseenter",bl,function(by){var bz=a2(by.currentTarget),bx=bz.find(".treasury-file-upload");
aJ(bz,bx)
}).on("mouseleave",bl,function(bx){var by=bx.currentTarget;
ae(by)
}).on("mouseenter",aA,function(bx){var by=a2(bx.currentTarget),bz=by.closest(B).find(".upload-again");
aJ(by,bz)
}).on("mouseleave",aA,function(bx){var bz=a2(bx.currentTarget),by=bz.closest(B).find(".upload-again");
ae(by)
}).on("mouseenter",ba,function(bx){var by=a2(bx.currentTarget);
aJ(by,by.closest(".treasury-form-container-upload"))
}).on("mouseleave",ba,function(){ae(".treasury-promo")
}).on("mouseenter",bc,function(bx){var by=a2(bx.currentTarget);
aJ(by,by.closest(".treasury-add-link-subsection"))
}).on("mouseleave",bc,function(){ae(".treasury-add-link-upload")
}).on("mouseenter",a6,function(bx){aJ(T(),a2(bx.currentTarget).closest(".add-link-upload"))
}).on("mouseleave",a6,function(bx){ae(".treasury-section-add")
});
if(r){q.on("click",bl,function(bx){a2(bx.currentTarget).toggleClass("ie-open")
}).on("blur",bl,function(bx){setTimeout(function(){a2(bx.currentTarget).removeClass("ie-open")
},500)
})
}A.on(O,"."+bo+" .upload-file-btn",function(bx){bx.preventDefault();
var bz=a2(this);
var by=bz.closest(".treasury-edit").find(aS);
by.attr("data-li-uploaded-filename","");
by.trigger(O);
bz.closest(w).removeClass(bo);
bz.closest(".media-wrapper").hide()
});
if(!LI.TREASURY_CONF.lix.newProfileEdit){q.on(O,"label.treasury-file-upload, .treasury-file-upload-btn",function(bx){bx.preventDefault();
if(!a2(s).closest(".active-edit").length){a2(aS).trigger(O)
}})
}function bm(){var bx=100,by;
return function(bz){if(bz.type==="focusout"){by=setTimeout(function(){a2(bz.target).closest(".styled-dropdown").removeClass("open")
},bx)
}else{clearTimeout(by)
}}
}q.on("focusin focusout",".label, .toggle-setting-menu",bm());
bg("media-open-slideshare",function(bx,by){bf.open(bx.attr("href"))
});
function be(bx,by){if(bx&&bx.length){bx.attr("tabindex",(by?0:-1)).focus()
}}a2.fn.ready(aF)
}(this,jQuery));LI.define("UploadStateManager");
LI.UploadStateManager=function(){var b=LI.Controls.getControl("treasury-slideshare-upload-form","SlideshareUploader2"),d={Inactive:"inactive",UploadActive:"upload_active",UploadError:"upload_error",UploadCancel:"upload_cancel",UploadProgressStart:"upload_progress_start",UploadProgressStatus:"upload_progress_status",UploadProgressEnd:"upload_progress_end",UploadFileComplete:"upload_file_complete",UploadImageComplete:"upload_image_complete",UploadQueueStart:"upload_queue_start",UploadQueueStatus:"upload_queue_status",UploadQueueEnd:"upload_queue_end",UploadConvertStart:"upload_convert_start",UploadConvertStatus:"upload_convert_status",UploadConvertEnd:"upload_convert_end",UploadPreview:"upload_preview",UploadComplete:"upload_complete"},a=$("body"),e=false;
function c(i){var g=[].concat(arguments[1]),k=g.shift(),f=g.shift(),j=g[0]||{},h;
switch(k){case d.UploadProgressStart:break;
case d.UploadActive:e=false;
a.trigger("upload-active",j);
break;
case d.UploadError:a.trigger("upload-error",j);
break;
case d.UploadPreview:break;
case d.UploadProgressStatus:a.trigger("upload-progress",j);
break;
case d.UploadProgressEnd:break;
case d.UploadQueueStart:break;
case d.UploadQueueEnd:break;
case d.UploadConvertStart:break;
case d.UploadConvertStatus:break;
case d.UploadConvertEnd:break;
case d.UploadFileComplete:a.trigger("upload-file-complete",j);
break;
case d.UploadImageComplete:e=true;
break;
case d.UploadProgressEnd:break;
case d.UploadComplete:j.isImage=e;
if(e){h={ThumbnailURL:j.image,ThumbnailSize:j.response.available_sizes.medium,URL:j.image,sizes:j.response.available_sizes};
j.slideshowstr=JSON.stringify(h)
}a.trigger("upload-complete",j);
break
}}b.attachStateMonitor(c)
};LI.define("SlideshareUploader2");
LI.SlideshareUploader2=function(W,I){if(!W||W.nodeType!==1){return
}I=I||{};
this.getElement=function G(){return W
};
this.attachStateMonitor=function(ad){aa.changed.subscribe(ad);
return 1
};
var Z={usePostMessage:true,documentDomain:"no_set",slideshareDomain:"auto",transportName:"slideShareIframeTransport",paths:{},fileInputId:"slideshare-file-input",enableUnload:true,enableImageUpload:true,checkSize:true,maxFileSize:104857600,enableTranscriptAsDescription:true,enableHealthCheck:false,trackingPrefix:"ssu-",promoStatus:0},p={PRESENTATION:"presentation",DOCUMENT:"document",IMAGE:"image",UNKNOWN:"unknown"},t={"jpeg":p.IMAGE,"jpg":p.IMAGE,"gif":p.IMAGE,"png":p.IMAGE,"pdf":p.DOCUMENT,"doc":p.DOCUMENT,"docx":p.DOCUMENT,"rtf":p.DOCUMENT,"odt":p.DOCUMENT,"ppt":p.PRESENTATION,"pps":p.PRESENTATION,"pptx":p.PRESENTATION,"ppsx":p.PRESENTATION,"pot":p.PRESENTATION,"potx":p.PRESENTATION,"odp":p.PRESENTATION},B={QUEUED:0,CONVERTING:1,DONE:2,FAILED:3},D={STARTING:"starting",UPLOADING:"uploading",DONE:"done",ERROR:"error"},u={UPLOAD:"upload",CONVERT:"convert",CONVERT2:"convert2",IFRAME:"iframe",TYPE:"type",SIZE:"size",PROGRESS:"progress"},c={"upload_active":"act","upload_error":"err","upload_cancel":"cncl","upload_progress_start":"ustart","upload_progress_end":"uend","upload_convert_start":"cstart","upload_convert_end":"cend","upload_icon_click":"clck","upload_file_upload":"sbmt","upload_preview":"prvw","upload_file_complete":"fcmpt","upload_image_complete":"icmpt"},E={SUCCEEDED:"succeed",CANCELLED:"cancelled",FAILED:"failed",UPLOAD:"upload",QUEUE:"queue",CONVERT:"convert"},d={Inactive:"inactive",UploadActive:"upload_active",UploadError:"upload_error",UploadCancel:"upload_cancel",UploadProgressStart:"upload_progress_start",UploadProgressStatus:"upload_progress_status",UploadProgressEnd:"upload_progress_end",UploadFileComplete:"upload_file_complete",UploadImageComplete:"upload_image_complete",UploadQueueStart:"upload_queue_start",UploadQueueStatus:"upload_queue_status",UploadQueueEnd:"upload_queue_end",UploadConvertStart:"upload_convert_start",UploadConvertStatus:"upload_convert_status",UploadConvertEnd:"upload_convert_end",UploadPreview:"upload_preview",UploadComplete:"upload_complete"},T=false,aa={},P=null,Y=null,C=YAHOO.lang,l=LI.i18n.get("slideshare-uploader-percentage"),ab=LI.i18n.get("slideshare-uploader-beforeunload"),ac,q,j,O,h,v,a;
function k(ad){C.augmentObject(this,ad,true);
this.progressId=this.progressPrefix+(+new Date())+Math.random();
this.timer=new o()
}function F(ad){function af(ag){if(ag&&ag.status!=="fail"){aa.state(d.UploadFileComplete,ag)
}else{ae(ag)
}}function ae(ag){aa.state(d.UploadError,{type:u.UPLOAD,json:ag})
}O.update({fileId:ad.file_key});
if(O.type===p.IMAGE){a={response:ad,image:O.getImageUploadUrl(),extension:O.ext,type:y(O.ext),id:O.fileId,url:O.getImageUploadUrl()};
aa.state(d.UploadImageComplete,a);
aa.state(d.UploadComplete,a)
}else{b(O.getConvertUrl(),af,ae)
}}k.prototype={convert:"/nhome/slideshare/convert-upload",status:"/nhome/slideshare/get-convert-status",slideshow:"/nhome/slideshare/get-slideshow",imageStore:"http://image-store.slidesharecdn.com/",progressPrefix:"_",uploadCallback:F,update:function(ad){C.augmentObject(this,ad,true);
return this
},updateTimer:function(){var ad=this.timer;
if(ad){return ad.update.apply(ad,arguments)
}return this
},getProgressUrl:function(){return Z.slideshareDomain+"/progress?X-Progress-ID="+this.progressId+"&jsonp_callback={callback}"
},getHealthCheckUrl:function(){if(Z.usePostMessage){return Z.slideshareDomain+"/health_check?X-Progress-ID="+this.progressId+"&jsonp_callback=void&window_post=true&iframe_jsonp=true&post_window=parent"
}else{return Z.slideshareDomain+"/health_check?X-Progress-ID="+this.progressId+"&jsonp_callback=void&set_document_domain=true&iframe_jsonp=true"
}},getUploadUrl:function(){var ad="SlideshareUploader"+this.progressPrefix+(+new Date()),ae;
ad=ad.replace(/\W/g,"");
LI[ad]=(function(af,ag){return function(){delete LI[ad];
af.apply(ag,arguments)
}
}(this.uploadCallback,this));
ae=Z.slideshareDomain+"/upload?X-Progress-ID="+this.progressId+"&iframe_jsonp=true";
if(Z.usePostMessage){ae+="&window_post=true&post_window=parent&jsonp_callback="+ad
}else{ae+="&set_document_domain=true&jsonp_callback=parent.LI."+ad
}return ae
},getConvertUrl:function(){return this.convert+"?shareOnSS=false&fileKey="+this.fileId
},getConvertStatusUrl:function(){return this.status+"?slideshowId="+this.slideshowId
},getPreviewUrl:function(){return this.slideshow+"?getHash=1&truncationLength=250&slideshowId="+this.slideshowId
},getImageUploadUrl:function(){var ad=this.fileId.split(".");
return this.imageStore+ad[0]+"-large."+ad[1]
}};
function o(){var ak={start:{},end:{}},ag=Z.paths&&Z.paths.monitor,ad="&fileAction={action}&actionResult={result}&time={time}&fileType={type}",ae=this,aj="",ai="unknown";
function ah(am){function al(an){return function(aq){var ap=typeof aq!=="string",ao=[].slice.call(arguments,ap?0:1);
return ae[an].apply(ae,[ap?am:aq].concat(ao))
}
}return{reset:al("reset"),update:al("update"),start:al("start"),end:al("end"),send:al("send")}
}function af(){return Date.now?Date.now():+new Date()
}this.reset=function(){ak={start:{},end:{}};
delete this.action;
delete this.result;
delete this.type;
return this
};
this.update=function(am,al){var an=typeof am==="string";
C.augmentObject(this,an?al:am,true);
return an?ah(am):this
};
this.start=function(al){if(al!==aj){this.update({action:al})
}al=al||ai;
aj=al;
ak.start[al]=af();
return ah(al)
};
this.end=function(al){al=al||ai;
ak.end[al]=af();
return ah(al)
};
this.send=function(am,al){var aq="",ap=typeof am==="string",an=(ap?am:am.state)||ai,ao=(ak.end[an]||af())-ak.start[an];
if(ap){am=al||{}
}if(!ag||isNaN(ao)){return this
}aq=C.substitute(ad,{action:an||am.action||this.action||ai,result:am.result||this.result||ai,time:ao,type:am.type||this.type||ai});
YUtil.Connect.asyncRequest("GET",ag+aq,{});
return ah(an)
}
}q=q||{trackUserAction:function(){}};
function r(ad){var ae=c[ad];
if(ae){q.trackUserAction(Z.trackingPrefix+ae)
}}function S(){var ad=document.domain.split(".").slice(-2).join(".");
Z=C.merge(Z,I);
ac=document.getElementById(Z.fileInputId);
if(Z.documentDomain==="no_set"||Z.documentDomain==="control"){}else{if(Z.documentDomain==="auto"){document.domain=document.domain
}else{if(Z.documentDomain==="auto_trim"){document.domain=ad
}else{document.domain=Z.documentDomain
}}}if(Z.usePostMessage){YEvent.on(window,"message",w)
}if(Z.slideshareDomain==="control"||Z.slideshareDomain==="auto"){Z.slideshareDomain="//slideshare."+document.domain
}else{if(Z.slideshareDomain==="auto_trim"){Z.slideshareDomain="//slideshare."+ad
}}if(Z.slideshareDomain.lastIndexOf("//",0)!==0){Z.slideshareDomain="//"+Z.slideshareDomain
}if(!(W&&W.id)){YDom.generateId(W,"slideshare-upload-form-")
}x();
YDom.setAttribute(W,"target",Z.transportName);
j=N(function(){YEvent.on(j,"load",Q)
});
document.body.appendChild(j);
YEvent.on(W,"submit",A);
YEvent.on(W,"reset",R);
YEvent.on(ac,"change",e);
YEvent.on(ac,"mousedown",g);
if(Z.enableUnload){YEvent.on(window,"beforeunload",V)
}aa=new J();
aa.changed.subscribe(z)
}function w(ad){var ae;
if(!ad||ad.source!==j.contentWindow||ad.type!=="message"||(ad.origin!=="https:"+Z.slideshareDomain&&ad.origin!=="http:"+Z.slideshareDomain)){return
}ae=YAHOO.lang.JSON.parse(ad.data);
if(ae.type!=="slidesharestatus"){return
}LI[ae.method](ae.payload)
}function x(){O=new k({progressPrefix:Z.progressPrefix}).update(Z.paths)
}function N(ag){var ad=document.createElement("iframe"),af=Z.enableHealthCheck;
ad.name=Z.transportName;
ad.className="slideshare-upload-iframe";
ad.style.display="none";
ad.frameborder="none";
ad.height=0;
ad.width=0;
YEvent.on(ad,"load",function ae(){var ah=!af||i(ad);
YEvent.removeListener(ad,"load",ae);
if(ah){ag.apply(this,arguments)
}});
if(af&&O){ad.src=O.getHealthCheckUrl()
}else{ad.src="javascript:false;"
}return ad
}function b(ae,ai,ad){var ah=ae.indexOf("//")===0||ae.indexOf("http")===0,ag=ae.indexOf("//"+window.location.host)>-1;
function af(ak){var aj=this;
return function(am){var al={};
if(am&&am.responseText){al=LI.parseJSON(LI.htmlUnencode(am.responseText))
}ak.call(aj,al,am)
}
}if(ah&&!ag){(new LI.JSONPRequest(ae,{on:{success:ai,failure:ad,timeout:ad}})).send()
}else{LI.asyncRequest("GET",ae,{success:af(ai),failure:af(ad),custom:{exception:af(ad),error:af(ad)}})
}}function L(){var ad=document.getElementById(Z.fileInputId);
LI.setDataAttribute(ad,"uploaded-filename",ad.value);
W.reset()
}function R(){x();
if(Y){Y.kill()
}T=false
}function K(ad){var ai=ad.success||function(){},ah=ad.failure||function(){},an=0,aj=ad.failureLimit||3,ae=ad.name,af=ad.url,ag=false,am;
function al(ao){if(typeof ao==="undefined"||ao===ae){ag=true;
clearTimeout(am)
}}(function ak(){function ap(){if(!ag){am=setTimeout(ak,1000)
}}function aq(ar){var at;
at=ai(ar);
an=0;
if(at){ap()
}}function ao(ar){var at=true;
if(++an>=aj){at=ah(ar)
}if(at){ap()
}}b(af,aq,ao)
}());
return{kill:al}
}function s(){var ae;
function af(ai){var ak=true,aj=ai.state,al=ai.received||0,ah=ai.size||0,ag=Math.max(0,Math.round(al/ah*100))||0;
if(aj===D.STARTING||aj===D.UPLOADING){aa.state(d.UploadProgressStatus,{percentage:C.substitute(l,{0:ag})})
}else{if(aj===D.DONE){ak=false;
aa.state(d.UploadProgressStatus,{percentage:C.substitute(l,{0:100})});
aa.state(d.UploadProgressEnd,ai)
}else{return ad(ai)
}}return ak
}function ad(ah){var ag=ah.status,ai=ag===413?u.SIZE:(ag===415?u.TYPE:u.PROGRESS);
aa.state(d.UploadError,{type:ai});
return false
}ae=K({name:d.UploadProgressEnd,url:O.getProgressUrl(),success:af,failure:ad});
return ae
}function M(){var ae;
function af(ah){var aj=ah.state,ai=aa.state(),ag=[d.UploadFileComplete,d.UploadQueueStatus,d.UploadQueueStart],ak=true;
if(aj===B.QUEUED){aa.state(d.UploadQueueStatus,ah)
}else{if(aj===B.CONVERTING&&LI.indexOf(ag,ai)>-1){aa.state(d.UploadQueueEnd,ah);
aa.state(d.UploadConvertStart,ah)
}else{if(aj===B.CONVERTING){aa.state(d.UploadConvertStatus,ah)
}else{if(aj===B.DONE){ak=false;
aa.state(d.UploadConvertEnd,ah)
}else{if(aj===B.FAILED){return ad(ah)
}}}}}return ak
}function ad(){aa.state(d.UploadError,{type:u.CONVERT});
return false
}ae=K({name:d.UploadConvertEnd,url:O.getConvertStatusUrl(),success:af,failure:ad});
return ae
}function X(){function ae(ah){var ag=ah.content&&ah.content.Slideshow,aj=ah.hash,af=ah.content.slideshowstr,ai=ah.transcript&&ah.transcript.transcript_body,al=Z.enableTranscriptAsDescription&&ai,ak=window.location.protocol;
if(ag){h={hash:aj,slideshow:ag,slideshowstr:af,title:ag.Title,summary:al&&ai||ag.Description,image:(ag.ThumbnailURL.indexOf("http")===0?"":ak)+ag.ThumbnailURL,extension:ag.Format,type:y(ag.Format),id:ag.ID,url:"http://www.slideshare.net/slideshow/embed_code/"+ag.ID};
aa.state(d.UploadComplete,h)
}else{ad(ah)
}}function ad(af){aa.state(d.UploadError,{type:u.CONVERT2})
}b(O.getPreviewUrl(),ae,ad)
}function U(ad){var af=ad.split("."),ae=af[af.length-1];
return ae.toLowerCase()
}function f(ad){var af=U(ad),ae=O.type||t[af]||p.UNKNOWN;
O.update({type:ae,ext:af}).updateTimer({type:af});
return(Z.enableImageUpload||!Z.enableImageUpload&&ae!==p.IMAGE)&&t.hasOwnProperty(af)
}function n(ad){return(!Z.checkSize)||(ad===undefined)||(ad&&ad<=Z.maxFileSize)
}function y(ad){var af=U(ad),ae=t[af]||p.UNKNOWN;
return LI.i18n.get("slideshare-uploader-"+ae)||""
}function H(ae){var ag=O&&O.getHealthCheckUrl(),ai=ag&&LI.domify('<iframe src="'+ag+'" height="0" width="0" style="display: none"></iframe>'),ak=ae||function(){},aj;
function af(al){if(ai&&ai.parentNode){ai.parentNode.removeChild(ai);
ai=null
}clearTimeout(aj);
ak(al)
}function ad(){var al=ai&&(!Z.enableHealthCheck||i(ai));
af(al)
}function ah(){var al=ai&&ai.readyState==="complete"&&(!Z.enableHealthCheck||i(ai));
af(al)
}if(ai){ai.onload=ad;
document.body.appendChild(ai);
aj=setTimeout(ah,10000)
}else{ah()
}}function e(){var ai=ac,aj=ai.value.replace(/\\/g,"/").split(/\//g),ae=ai.files?ai.files[0].size:undefined,ag=aj.pop(),ah=t[U(ag)]||p.UNKNOWN,ad=ah===p.IMAGE;
if(!n(ae)){aa.state(d.UploadError,{type:u.SIZE});
return
}aa.state(d.UploadActive,{isImageUpload:ad,type:ah});
if(f(ag)){H(function af(ak){if(ak){v=O.getUploadUrl();
YDom.setAttribute(W,"action",v);
W.submit();
aa.state(d.UploadPreview,{track:ad,title:ag,type:y(ag)})
}else{aa.state(d.UploadError,{type:u.PROGRESS})
}})
}else{aa.state(d.UploadError,{type:u.TYPE})
}}function g(){r("upload_icon_click")
}function i(af){var ag=af||j,ad=true,ah;
if(Z.usePostMessage){return true
}try{ah=ag.contentWindow.document;
if(!ah.getElementsByTagName("script").length){ad=false
}}catch(ae){ad=false
}return ad
}function Q(){setTimeout(function(){var ad=i(j);
if(!ad){aa.state(d.UploadError,{type:u.IFRAME})
}},100)
}function A(){r("upload_file_upload")
}function V(ad){if(P&&P.is_a(d.UploadActive)&&!P.is_a(d.UploadError)){ad.returnValue=ab;
return ab
}}function z(af){var ae=[].concat(arguments[1]),ah=ae.shift(),ad=ae.shift(),ag=ae[0]||{},ai=O.timer;
if(ag.track!==false){r(ah)
}switch(ah){case d.Inactive:L();
break;
case d.Active:break;
case d.UploadActive:Y=s();
ai.reset();
aa.state(d.UploadProgressStart);
break;
case d.UploadProgressStart:ai.start(E.UPLOAD);
break;
case d.UploadProgressEnd:if(Y){Y.kill(ah)
}m();
break;
case d.UploadImageComplete:ai.update({result:E.SUCCEEDED}).end(E.UPLOAD).send().reset();
break;
case d.UploadFileComplete:O.update({slideshowId:ag.slideshow_id});
aa.state(d.UploadQueueStart);
ai.update({result:E.SUCCEEDED}).end(E.UPLOAD).send();
Y=M();
break;
case d.UploadQueueStart:ai.start(E.QUEUE);
break;
case d.UploadQueueEnd:ai.update({result:E.SUCCEEDED}).end(E.QUEUE).send();
break;
case d.UploadConvertStart:ai.start(E.CONVERT);
break;
case d.UploadConvertEnd:if(Y){Y.kill(ah)
}X();
ai.update({result:E.SUCCEEDED}).end(E.CONVERT).send().reset();
break;
case d.UploadError:L();
if(Y){Y.kill()
}ai.send(ai.action,{result:E.FAILED});
break;
case d.UploadCancel:aa.state(d.Inactive,true);
if(Y){Y.kill()
}ai.send(ai.action,{result:E.CANCELLED});
break;
case d.UploadComplete:L();
if(Y){Y.kill()
}break;
default:break
}}function m(){var af=Z.convertTimeThresholds,ae=function(ah,ag){if(typeof ah==="string"&&(ah=ah.match(/\d+/))){ah=parseInt(ah[0],10)
}if(ag&&ah&&!isNaN(ah)){ah=ah*1000;
window.setTimeout(function(){aa.state(ag)
},ah)
}};
if(af){for(var ad in af){if(af.hasOwnProperty(ad)){ae(af[ad],d[ad])
}}}}function J(){var ad;
this.changed=new YAHOO.util.CustomEvent("changed");
this.state=function(af,ae){if(arguments.length>=1){this.changed.fire(af,ad,ae||[]);
ad=af
}else{return ad
}};
this.STATE=d
}S()
};